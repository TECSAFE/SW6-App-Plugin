(window["webpackJsonpPluginmad-tecsafe"]=window["webpackJsonpPluginmad-tecsafe"]||[]).push([[362],{184:function(){},362:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}}),n(65);let{Mixin:i}=Shopware;var a={template:'\n{% block sw_cms_element_ofcp_product_detail_widget_config %}\n<div class="sw-cms-el-config-ofcp-product-detail-widget">\n\n    <h2>FOOO</h2>\n    \n    {% block sw_cms_element_ofcp_product_detail_widget_config_preview_media %}\n    <sw-cms-mapping-field\n        v-model:config="element.config.previewMedia"\n        :label="$tc(\'sw-cms.elements.ofcpProductDetailWidget.config.label.previewImage\')"\n        value-types="entity"\n        entity="media"\n    >\n        <sw-media-upload-v2\n            variant="regular"\n            :upload-tag="uploadTag"\n            :source="previewSource"\n            :allow-multi-select="false"\n            :default-folder="cmsPageState.pageEntityName"\n            :caption="$tc(\'sw-cms.elements.general.config.caption.mediaUpload\')"\n            @media-upload-sidebar-open="onOpenMediaModal"\n            @media-upload-remove-image="onImageRemove"\n        />\n\n        \n        {% block sw_cms_element_ofcp_product_detail_widget_config_preview_media_display %}\n        <template #preview="{ demoValue }">\n            <div class="sw-cms-el-config-image__mapping-preview">\n                <img\n                    v-if="demoValue.url"\n                    :src="demoValue.url"\n                    alt=""\n                >\n                <sw-alert\n                    v-else\n                    class="sw-cms-el-config-image__preview-info"\n                    variant="info"\n                >\n                    {{ $tc(\'sw-cms.detail.label.mappingEmptyPreview\') }}\n                </sw-alert>\n            </div>\n        </template>\n        {% endblock %}\n    </sw-cms-mapping-field>\n\n    \n    {% block sw_cms_element_ofcp_product_detail_widget_config_preview_media_upload_listener %}\n    <sw-upload-listener\n        :upload-tag="uploadTag"\n        auto-upload\n        @media-upload-finish="onImageUpload"\n    />\n    {% endblock %}\n\n    \n    {% block sw_cms_element_ofcp_product_detail_widget_config_preview_media_modal %}\n    <sw-media-modal-v2\n        v-if="mediaModalIsOpen"\n        variant="full"\n        :caption="$tc(\'sw-cms.elements.general.config.caption.mediaUpload\')"\n        :entity-context="cmsPageState.entityName"\n        :allow-multi-select="false"\n        :initial-folder-id="cmsPageState.defaultMediaFolderId"\n        @media-upload-remove-image="onImageRemove"\n        @media-modal-selection-change="onSelectionChanges"\n        @modal-close="onCloseModal"\n    />\n    {% endblock %}\n    {% endblock %}\n</div>\n{% endblock %}\n',inject:["repositoryFactory"],mixins:[i.getByName("cms-element")],data(){return{mediaModalIsOpen:!1,initialFolderId:null}},computed:{mediaRepository(){return this.repositoryFactory.create("media")},uploadTag(){return`cms-element-ofcp-product-detail-widget-config-${this.element.id}`},previewSource(){return this.element.data&&this.element.data.previewMedia&&this.element.data.previewMedia.id?this.element.data.previewMedia:this.element.config.previewMedia.value}},created(){this.createdComponent()},methods:{setTimeValue(e,t){this.element.config[t].value=this.convertTimeToUrlFormat(e).string},createdComponent(){console.log("createdComponent config"),this.initElementConfig("ofcp-product-detail-widget")},convertTimeToInputFormat(e){let t={},n=e;/^[0-9]*$/.test(e)||(n=0);let i=Math.floor(n/60),a=n-60*i;return t.minutes=i,t.seconds=a,1===a.toString().length&&(a=`0${a}`),t.string=`${i}:${a}`,t},convertTimeToUrlFormat(e){let t={},n=e;/[0-9]?[0-9]:[0-9][0-9]/.test(n)||(n="00:00");let i=n.split(":");return t.minutes=Number(i[0]),t.seconds=Number(i[1]),t.string=60*t.minutes+t.seconds,t},shortenLink(e){let t=e;if("shareLink"==(/https\:\/\/youtu\.be\//.test(t)?"shareLink":"urlLink")){let e=/\?/;if(t=t.replace(/https\:\/\/youtu\.be\//,""),e.test(t)){let n=e.exec(t).index;t=t.substring(0,n)}}else{let e=/https\:\/\/www\.youtube\.com\/watch\?v\=/,n=/\&/;if(e.test(t)&&(t=t.replace(e,"")),n.test(t)){let e=n.exec(t).index;t=t.substring(0,e)}}return t},async onImageUpload({targetId:e}){let t=await this.mediaRepository.get(e);this.element.config.previewMedia.value=t.id,this.updateElementData(t),this.$emit("element-update",this.element)},onImageRemove(){this.element.config.previewMedia.value=null,this.updateElementData(),this.$emit("element-update",this.element)},onCloseModal(){this.mediaModalIsOpen=!1},onSelectionChanges(e){let t=e[0];this.element.config.previewMedia.value=t.id,this.updateElementData(t),this.$emit("element-update",this.element)},updateElementData(e=null){this.$set(this.element.data,"previewMediaId",null===e?null:e.id),this.$set(this.element.data,"previewMedia",e)},onOpenMediaModal(){this.mediaModalIsOpen=!0}}}},65:function(e,t,n){var i=n(184);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals),n(346).Z("78b75308",i,!0,{})},346:function(e,t,n){"use strict";function i(e,t){for(var n=[],i={},a=0;a<t.length;a++){var o=t[a],l=o[0],s={id:e+":"+a,css:o[1],media:o[2],sourceMap:o[3]};i[l]?i[l].parts.push(s):n.push(i[l]={id:l,parts:[s]})}return n}n.d(t,{Z:function(){return f}});var a="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!a)throw Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},l=a&&(document.head||document.getElementsByTagName("head")[0]),s=null,r=0,d=!1,c=function(){},m=null,p="data-vue-ssr-id",u="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(e,t,n,a){d=n,m=a||{};var l=i(e,t);return g(l),function(t){for(var n=[],a=0;a<l.length;a++){var s=o[l[a].id];s.refs--,n.push(s)}t?g(l=i(e,t)):l=[];for(var a=0;a<n.length;a++){var s=n[a];if(0===s.refs){for(var r=0;r<s.parts.length;r++)s.parts[r]();delete o[s.id]}}}}function g(e){for(var t=0;t<e.length;t++){var n=e[t],i=o[n.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](n.parts[a]);for(;a<n.parts.length;a++)i.parts.push(h(n.parts[a]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{for(var l=[],a=0;a<n.parts.length;a++)l.push(h(n.parts[a]));o[n.id]={id:n.id,refs:1,parts:l}}}}function v(){var e=document.createElement("style");return e.type="text/css",l.appendChild(e),e}function h(e){var t,n,i=document.querySelector("style["+p+'~="'+e.id+'"]');if(i){if(d)return c;i.parentNode.removeChild(i)}if(u){var a=r++;t=_.bind(null,i=s||(s=v()),a,!1),n=_.bind(null,i,a,!0)}else t=b.bind(null,i=v()),n=function(){i.parentNode.removeChild(i)};return t(e),function(i){i?(i.css!==e.css||i.media!==e.media||i.sourceMap!==e.sourceMap)&&t(e=i):n()}}var w=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function _(e,t,n,i){var a=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=w(t,a);else{var o=document.createTextNode(a),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(o,l[t]):e.appendChild(o)}}function b(e,t){var n=t.css,i=t.media,a=t.sourceMap;if(i&&e.setAttribute("media",i),m.ssrId&&e.setAttribute(p,t.id),a&&(n+="\n/*# sourceURL="+a.sources[0]+" */\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}}}]);