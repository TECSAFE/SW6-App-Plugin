(()=>{"use strict";var e={538:(e,t,n)=>{t.TypedEmitter=n(749).EventEmitter},313:e=>{var t=function(e){var t;return!!e&&"object"==typeof e&&"[object RegExp]"!==(t=Object.prototype.toString.call(e))&&"[object Date]"!==t&&e.$$typeof!==n},n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(e,t){return!1!==t.clone&&t.isMergeableObject(e)?u(Array.isArray(e)?[]:{},e,t):e}function o(e,t,n){return e.concat(t).map(function(e){return r(e,n)})}function i(e){return Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[])}function a(e,t){try{return t in e}catch(e){return!1}}function u(e,n,s){(s=s||{}).arrayMerge=s.arrayMerge||o,s.isMergeableObject=s.isMergeableObject||t,s.cloneUnlessOtherwiseSpecified=r;var c,l,f=Array.isArray(n);return f!==Array.isArray(e)?r(n,s):f?s.arrayMerge(e,n,s):(l={},(c=s).isMergeableObject(e)&&i(e).forEach(function(t){l[t]=r(e[t],c)}),i(n).forEach(function(t){(!a(e,t)||Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))&&(a(e,t)&&c.isMergeableObject(n[t])?l[t]=(function(e,t){if(!t.customMerge)return u;var n=t.customMerge(e);return"function"==typeof n?n:u})(t,c)(e[t],n[t],c):l[t]=r(n[t],c))}),l)}u.all=function(e,t){if(!Array.isArray(e))throw Error("first argument should be an array");return e.reduce(function(e,n){return u(e,n,t)},{})},e.exports=u},749:e=>{function t(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var n,r="object"==typeof Reflect?Reflect:null,o=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};n=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise(function(n,r){function o(n){e.removeListener(t,i),r(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}d(e,t,i,{once:!0}),"error"!==t&&"function"==typeof e.on&&d(e,"error",o,{once:!0})})},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function s(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+(void 0===e?"undefined":t(e)))}function c(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){if(s(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]),void 0===a)a=i[t]=n,++e._eventsCount;else if("function"==typeof a?a=i[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(o=c(e))>0&&a.length>o&&!a.warned){a.warned=!0;var o,i,a,u=Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,console&&console.warn&&console.warn(u)}return e}function f(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=f.bind(r);return o.listener=n,r.wrapFn=o,o}function p(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):y(o,o.length)}function v(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function y(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function d(e,n,r,o){if("function"==typeof e.on)o.once?e.once(n,r):e.on(n,r);else if("function"==typeof e.addEventListener)e.addEventListener(n,function t(i){o.once&&e.removeEventListener(n,t),r(i)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+(void 0===e?"undefined":t(e)))}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||i(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),a.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){if(t.length>0&&(s=t[0]),a=s,null!=(u=Error)&&"undefined"!=typeof Symbol&&u[Symbol.hasInstance]?!!u[Symbol.hasInstance](a):a instanceof u)throw s;var a,u,s,c=Error("Unhandled error."+(s?" ("+s.message+")":""));throw c.context=s,c}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)o(l,this,t);else for(var f=l.length,h=y(l,f),n=0;n<f;++n)o(h[n],this,t);return!0},a.prototype.addListener=function(e,t){return l(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return l(this,e,t,!0)},a.prototype.once=function(e,t){return s(t),this.on(e,h(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,h(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,o,i,a;if(s(t),void 0===(r=this._events)||void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0==arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},a.prototype.listenerCount=v,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(()=>{n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t}})(),(()=>{n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}})(),(()=>{n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e=n(313),t=n.n(e),r=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"ucFirst",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"lcFirst",value:function(e){return e.charAt(0).toLowerCase()+e.slice(1)}},{key:"toDashCase",value:function(e){return e.replace(/([A-Z])/g,"-$1").replace(/^-/,"").toLowerCase()}},{key:"toLowerCamelCase",value:function(e,n){var r=t.toUpperCamelCase(e,n);return t.lcFirst(r)}},{key:"toUpperCamelCase",value:function(e,n){return n?e.split(n).map(function(e){return t.ucFirst(e.toLowerCase())}).join(""):t.ucFirst(e.toLowerCase())}},{key:"parsePrimitive",value:function(e){try{return/^\d+(.|,)\d+$/.test(e)&&(e=e.replace(",",".")),JSON.parse(e)}catch(t){return e.toString()}}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t,e),t}(),o=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"isNode",value:function(e){var t;return"object"==typeof e&&null!==e&&(e===document||e===window||(null!=(t=Node)&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t))}},{key:"hasAttribute",value:function(e,n){if(!t.isNode(e))throw Error("The element must be a valid HTML Node!");return"function"==typeof e.hasAttribute&&e.hasAttribute(n)}},{key:"getAttribute",value:function(e,n){var r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(r&&!1===t.hasAttribute(e,n))throw Error('The required property "'.concat(n,'" does not exist!'));if("function"!=typeof e.getAttribute){if(r)throw Error("This node doesn't support the getAttribute function!");return}return e.getAttribute(n)}},{key:"getDataAttribute",value:function(e,n){var o=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=n.replace(/^data(|-)/,""),a=r.toLowerCamelCase(i,"-");if(!t.isNode(e)){if(o)throw Error("The passed node is not a valid HTML Node!");return}if(void 0===e.dataset){if(o)throw Error("This node doesn't support the dataset attribute!");return}var u=e.dataset[a];if(void 0===u){if(o)throw Error('The required data attribute "'.concat(n,'" does not exist on ').concat(e,"!"));return u}return r.parsePrimitive(u)}},{key:"querySelector",value:function(e,n){var r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(r&&!t.isNode(e))throw Error("The parent node is not a valid HTML Node!");var o=e.querySelector(n)||!1;if(r&&!1===o)throw Error('The required element "'.concat(n,'" does not exist in parent node!'));return o}},{key:"querySelectorAll",value:function(e,n){var r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(r&&!t.isNode(e))throw Error("The parent node is not a valid HTML Node!");var o=e.querySelectorAll(n);if(0===o.length&&(o=!1),r&&!1===o)throw Error('At least one item of "'.concat(n,'" must exist in parent node!'));return o}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t,e),t}();function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){var e,t;function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,n),this._el=e,e.$emitter=this,this._listeners=[]}return e=[{key:"publish",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new CustomEvent(e,{detail:t,cancelable:n});return this.el.dispatchEvent(r),r}},{key:"subscribe",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this,o=e.split("."),i=n.scope?t.bind(n.scope):t;if(n.once&&!0===n.once){var a=i;i=function(t){r.unsubscribe(e),a(t)}}return this.el.addEventListener(o[0],i),this.listeners.push({splitEventName:o,opts:n,cb:i}),!0}},{key:"unsubscribe",value:function(e){var t=this,n=e.split(".");return this.listeners=this.listeners.reduce(function(e,r){var o;return((function(e){if(Array.isArray(e))return i(e)})(o=r.splitEventName)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}}(o)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).sort().toString()===n.sort().toString()?t.el.removeEventListener(r.splitEventName[0],r.cb):e.push(r),e},[]),!0}},{key:"reset",value:function(){var e=this;return this.listeners.forEach(function(t){e.el.removeEventListener(t.splitEventName[0],t.cb)}),this.listeners=[],!0}},{key:"el",get:function(){return this._el},set:function(e){this._el=e}},{key:"listeners",get:function(){return this._listeners},set:function(e){this._listeners=e}}],a(n.prototype,e),t&&a(n,t),n}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}var l=function(){var e,n;function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),!o.isNode(e))throw Error("There is no valid element given.");this.el=e,this.$emitter=new u(this.el),this._pluginName=this._getPluginName(n),this.options=this._mergeOptions(t),this._initialized=!1,this._registerInstance(),this._init()}return e=[{key:"init",value:function(){throw Error('The "init" method for the plugin "'.concat(this._pluginName,'" is not defined.'))}},{key:"update",value:function(){}},{key:"_init",value:function(){this._initialized||(this.init(),this._initialized=!0)}},{key:"_update",value:function(){this._initialized&&this.update()}},{key:"_mergeOptions",value:function(e){var n=r.toDashCase(this._pluginName),i=o.getDataAttribute(this.el,"data-".concat(n,"-config"),!1),a=o.getAttribute(this.el,"data-".concat(n,"-options"),!1),u=[this.constructor.options,this.options,e];i&&u.push(window.PluginConfigManager.get(this._pluginName,i));try{a&&u.push(JSON.parse(a))}catch(e){throw console.error(this.el),Error('The data attribute "data-'.concat(n,'-options" could not be parsed to json: ').concat(e.message))}return t().all(u.filter(function(e){return c(e,Object)&&!c(e,Array)}).map(function(e){return e||{}}))}},{key:"_registerInstance",value:function(){window.PluginManager.getPluginInstancesFromElement(this.el).set(this._pluginName,this),window.PluginManager.getPlugin(this._pluginName,!1).get("instances").push(this)}},{key:"_getPluginName",value:function(e){return e||(e=this.constructor.name),e}}],s(i.prototype,e),n&&s(i,n),i}(),f=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"isSupported",value:function(){return"undefined"!==document.cookie}},{key:"setItem",value:function(e,t,n){if(null==e)throw Error("You must specify a key to set a cookie");var r=new Date;r.setTime(r.getTime()+864e5*n);var o="";"https:"===location.protocol&&(o="secure"),document.cookie="".concat(e,"=").concat(t,";expires=").concat(r.toUTCString(),";path=/;sameSite=lax;").concat(o)}},{key:"getItem",value:function(e){if(!e)return!1;for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return!1}},{key:"removeItem",value:function(e){document.cookie="".concat(e,"= ; expires = Thu, 01 Jan 1970 00:00:00 GMT;path=/")}},{key:"key",value:function(){return""}},{key:"clear",value:function(){}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t,e),t}(),h=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"isTouchDevice",value:function(){return"ontouchstart"in document.documentElement}},{key:"isIOSDevice",value:function(){return t.isIPhoneDevice()||t.isIPadDevice()}},{key:"isNativeWindowsBrowser",value:function(){return t.isIEBrowser()||t.isEdgeBrowser()}},{key:"isIPhoneDevice",value:function(){return!!navigator.userAgent.match(/iPhone/i)}},{key:"isIPadDevice",value:function(){return!!navigator.userAgent.match(/iPad/i)}},{key:"isIEBrowser",value:function(){return -1!==navigator.userAgent.toLowerCase().indexOf("msie")||!!navigator.userAgent.match(/Trident.*rv:\d+\./)}},{key:"isEdgeBrowser",value:function(){return!!navigator.userAgent.match(/Edge\/\d+/i)}},{key:"getList",value:function(){return{"is-touch":t.isTouchDevice(),"is-ios":t.isIOSDevice(),"is-native-windows":t.isNativeWindowsBrowser(),"is-iphone":t.isIPhoneDevice(),"is-ipad":t.isIPadDevice(),"is-ie":t.isIEBrowser(),"is-edge":t.isEdgeBrowser()}}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t,e),t}();function p(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}var v=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"iterate",value:function(e,t){if(p(e,Map)||Array.isArray(e))return e.forEach(t);if(p(e,FormData)){var n=!0,r=!1,o=void 0;try{for(var i,a=e.entries()[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=i.value;t(u[1],u[0])}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return}if(p(e,NodeList))return e.forEach(t);if(p(e,HTMLCollection))return Array.from(e).forEach(t);if(p(e,Object))return Object.keys(e).forEach(function(n){t(e[n],n)});throw Error("The element type ".concat(void 0===e?"undefined":e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e," is not iterable!"))}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t,e),t}();function y(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}var m="offcanvas",g=Object.freeze(new(function(){function e(){y(this,e),this.$emitter=new u}return b(e,[{key:"open",value:function(e,t,n,r,o,i,a){this._removeExistingOffCanvas();var u=this._createOffCanvas(n,i,a,r);this.setContent(e,r,o),this._openOffcanvas(u,t)}},{key:"setContent",value:function(e,t){var n=this.getOffCanvas();n[0]&&(n[0].innerHTML=e,this._registerEvents(t))}},{key:"setAdditionalClassName",value:function(e){this.getOffCanvas()[0].classList.add(e)}},{key:"getOffCanvas",value:function(){return document.querySelectorAll(".".concat(m))}},{key:"close",value:function(e){var t=this,n=this.getOffCanvas();v.iterate(n,function(e){bootstrap.Offcanvas.getInstance(e).hide()}),setTimeout(function(){t.$emitter.publish("onCloseOffcanvas",{offCanvasContent:n})},e)}},{key:"goBackInHistory",value:function(){window.history.back()}},{key:"exists",value:function(){return this.getOffCanvas().length>0}},{key:"_openOffcanvas",value:function(t,n){e.bsOffcanvas.show(),window.history.pushState("offcanvas-open",""),"function"==typeof n&&n()}},{key:"_registerEvents",value:function(e){var t=this,n=h.isTouchDevice()?"touchend":"click",r=this.getOffCanvas();v.iterate(r,function(n){var o=function(){setTimeout(function(){n.remove(),t.$emitter.publish("onCloseOffcanvas",{offCanvasContent:r})},e),n.removeEventListener("hide.bs.offcanvas",o)};n.addEventListener("hide.bs.offcanvas",o)}),window.addEventListener("popstate",this.close.bind(this,e),{once:!0});var o=document.querySelectorAll(".".concat("js-offcanvas-close"));v.iterate(o,function(r){return r.addEventListener(n,t.close.bind(t,e))})}},{key:"_removeExistingOffCanvas",value:function(){e.bsOffcanvas=null;var t=this.getOffCanvas();return v.iterate(t,function(e){return e.remove()})}},{key:"_getPositionClass",value:function(e){return"left"===e?"offcanvas-start":"right"===e?"offcanvas-end":"offcanvas-".concat(e)}},{key:"_createOffCanvas",value:function(t,n,r,o){var i=document.createElement("div");if(i.classList.add(m),i.classList.add(this._getPositionClass(t)),!0===n&&i.classList.add("is-fullwidth"),r){var a=void 0===r?"undefined":r&&"undefined"!=typeof Symbol&&r.constructor===Symbol?"symbol":typeof r;if("string"===a)i.classList.add(r);else if(Array.isArray(r))r.forEach(function(e){i.classList.add(e)});else throw Error('The type "'.concat(a,'" is not supported. Please pass an array or a string.'))}return document.body.appendChild(i),e.bsOffcanvas=new bootstrap.Offcanvas(i,{backdrop:!1!==o||"static"}),i}}]),e}())),k=function(){function e(){y(this,e)}return b(e,null,[{key:"open",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",r=!(arguments.length>3)||void 0===arguments[3]||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";g.open(e,t,n,r,o,i,a)}},{key:"setContent",value:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:350;g.setContent(e,t,n)}},{key:"setAdditionalClassName",value:function(e){g.setAdditionalClassName(e)}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:350;g.close(e)}},{key:"exists",value:function(){return g.exists()}},{key:"getOffCanvas",value:function(){return g.getOffCanvas()}},{key:"REMOVE_OFF_CANVAS_DELAY",value:function(){return 350}}]),e}();function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=function(){var e,t;function n(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,n),this._request=null,this._errorHandlingInternal=!1}return e=[{key:"get",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json",r=this._createPreparedRequest("GET",e,n);return this._sendRequest(r,null,t)}},{key:"post",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";r=this._getContentType(t,r);var o=this._createPreparedRequest("POST",e,r);return this._sendRequest(o,t,n)}},{key:"delete",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";r=this._getContentType(t,r);var o=this._createPreparedRequest("DELETE",e,r);return this._sendRequest(o,t,n)}},{key:"patch",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";r=this._getContentType(t,r);var o=this._createPreparedRequest("PATCH",e,r);return this._sendRequest(o,t,n)}},{key:"abort",value:function(){if(this._request)return this._request.abort()}},{key:"setErrorHandlingInternal",value:function(e){this._errorHandlingInternal=e}},{key:"_registerOnLoaded",value:function(e,t){t&&(!0===this._errorHandlingInternal?(e.addEventListener("load",function(){t(e.responseText,e)}),e.addEventListener("abort",function(){console.warn("the request to ".concat(e.responseURL," was aborted"))}),e.addEventListener("error",function(){console.warn("the request to ".concat(e.responseURL," failed with status ").concat(e.status))}),e.addEventListener("timeout",function(){console.warn("the request to ".concat(e.responseURL," timed out"))})):e.addEventListener("loadend",function(){t(e.responseText,e)}))}},{key:"_sendRequest",value:function(e,t,n){return this._registerOnLoaded(e,n),e.send(t),e}},{key:"_getContentType",value:function(e,t){var n;return(null!=(n=FormData)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](e):e instanceof n)&&(t=!1),t}},{key:"_createPreparedRequest",value:function(e,t,n){return this._request=new XMLHttpRequest,this._request.open(e,t),this._request.setRequestHeader("X-Requested-With","XMLHttpRequest"),n&&this._request.setRequestHeader("Content-type",n),this._request}}],w(n.prototype,e),t&&w(n,t),n}();function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C="loader",E={BEFORE:"before",INNER:"inner"},S=function(){var e,t;function n(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E.BEFORE;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,n),this.parent=(null!=(t=Element)&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t)?e:document.body.querySelector(e),this.position=r}return e=[{key:"create",value:function(){if(!this.exists()){if(this.position===E.INNER){this.parent.innerHTML=n.getTemplate();return}this.parent.insertAdjacentHTML(this._getPosition(),n.getTemplate())}}},{key:"remove",value:function(){var e=this.parent.querySelectorAll(".".concat(C));v.iterate(e,function(e){return e.remove()})}},{key:"exists",value:function(){return this.parent.querySelectorAll(".".concat(C)).length>0}},{key:"_getPosition",value:function(){return this.position===E.BEFORE?"afterbegin":"beforeend"}}],t=[{key:"getTemplate",value:function(){return'<div class="'.concat(C,'" role="status">\n                    <span class="').concat("visually-hidden",'">Loading...</span>\n                </div>')}},{key:"SELECTOR_CLASS",value:function(){return C}}],e&&O(n.prototype,e),t&&O(n,t),n}();function T(e,t,n){return(T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n||e):o.value}})(e,t,n||e)}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A=null,L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(o,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n,r=P(o);if(t){var i=P(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(e=n)&&("object"==(e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)||"function"==typeof e)?e:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this)});function o(){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return n=[{key:"open",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"left",o=!(arguments.length>4)||void 0===arguments[4]||arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:k.REMOVE_OFF_CANVAS_DELAY(),a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"";if(!e)throw Error("A url must be given!");g._removeExistingOffCanvas();var s=g._createOffCanvas(r,a,u,o);this.setContent(e,t,n,o,i),g._openOffcanvas(s)}},{key:"setContent",value:function(e,t,n,r,i){var a=this,u=new _;T(P(o),"setContent",this).call(this,'<div class="offcanvas-body">'.concat(S.getTemplate(),"</div>"),r,i),A&&A.abort();var s=function(e){T(P(o),"setContent",a).call(a,e,r,i),"function"==typeof n&&n(e)};A=t?u.post(e,t,o.executeCallback.bind(this,s)):u.get(e,o.executeCallback.bind(this,s))}},{key:"executeCallback",value:function(e,t){"function"==typeof e&&e(t),window.PluginManager.initializePlugins()}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(o,n),o}(k);function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var I="element-loader-backdrop",N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(o,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n,r=x(o);if(t){var i=x(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(e=n)&&("object"==(e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)||"function"==typeof e)?e:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this)});function o(){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return n=[{key:"create",value:function(e){e.classList.add("has-element-loader"),o.exists(e)||(o.appendLoader(e),setTimeout(function(){var t=e.querySelector(".".concat(I));t&&t.classList.add("element-loader-backdrop-open")},1))}},{key:"remove",value:function(e){e.classList.remove("has-element-loader");var t=e.querySelector(".".concat(I));t&&t.remove()}},{key:"exists",value:function(e){return e.querySelectorAll(".".concat(I)).length>0}},{key:"getTemplate",value:function(){return'\n        <div class="'.concat(I,'">\n            <div class="loader" role="status">\n                <span class="').concat("visually-hidden",'">Loading...</span>\n            </div>\n        </div>\n        ')}},{key:"appendLoader",value:function(e){e.insertAdjacentHTML("beforeend",o.getTemplate())}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(o,n),o}(S);function M(e,t,n){return(M=U()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&D(o,n.prototype),o}).apply(null,arguments)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){var t="function"==typeof Map?new Map:void 0;return(F=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return M(e,arguments,B(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),D(n,e)})(e)}function U(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var W="CookieConfiguration_Update";function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(i,e);var t,n,r,o=(t=U(),function(){var e,n,r=B(i);if(t){var o=B(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(e=n)&&("object"==(e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)||"function"==typeof e)?e:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this)});function i(){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return n=[{key:"init",value:function(){this.lastState={active:[],inactive:[]},this._httpClient=new _,this._registerEvents()}},{key:"_registerEvents",value:function(){var e=this,t=this.options,n=t.submitEvent,r=t.buttonOpenSelector,o=t.customLinkSelector,i=t.globalButtonAcceptAllSelector;Array.from(document.querySelectorAll(r)).forEach(function(t){t.addEventListener(n,e.openOffCanvas.bind(e))}),Array.from(document.querySelectorAll(o)).forEach(function(t){t.addEventListener(n,e._handleCustomLink.bind(e))}),Array.from(document.querySelectorAll(i)).forEach(function(t){t.addEventListener(n,e._acceptAllCookiesFromCookieBar.bind(e))})}},{key:"_registerOffCanvasEvents",value:function(){var e=this,t=this.options,n=t.submitEvent,r=t.buttonSubmitSelector,o=t.buttonAcceptAllSelector,i=t.wrapperToggleSelector,a=this._getOffCanvas();if(a){var u=a.querySelector(r),s=a.querySelector(o),c=Array.from(a.querySelectorAll('input[type="checkbox"]')),l=Array.from(a.querySelectorAll(i));u&&u.addEventListener(n,this._handleSubmit.bind(this,f)),s&&s.addEventListener(n,this._acceptAllCookiesFromOffCanvas.bind(this,f)),c.forEach(function(t){t.addEventListener(n,e._handleCheckbox.bind(e))}),l.forEach(function(t){t.addEventListener(n,e._handleWrapperTrigger.bind(e))})}}},{key:"_handleCustomLink",value:function(e){e.preventDefault(),this.openOffCanvas()}},{key:"_handleUpdateListener",value:function(e,t){var n=this._getUpdatedCookies(e,t);document.$emitter.publish(W,n)}},{key:"_getUpdatedCookies",value:function(e,t){var n=this.lastState,r={};return e.forEach(function(e){n.inactive.includes(e)&&(r[e]=!0)}),t.forEach(function(e){n.active.includes(e)&&(r[e]=!1)}),r}},{key:"openOffCanvas",value:function(e){var t=this.options.offCanvasPosition,n=window.router["frontend.cookie.offcanvas"];this._hideCookieBar(),L.open(n,!1,this._onOffCanvasOpened.bind(this,e),t)}},{key:"closeOffCanvas",value:function(e){L.close(),"function"==typeof e&&e()}},{key:"_onOffCanvasOpened",value:function(e){this._registerOffCanvasEvents(),this._setInitialState(),this._setInitialOffcanvasState(),PluginManager.initializePlugins(),"function"==typeof e&&e()}},{key:"_hideCookieBar",value:function(){var e=PluginManager.getPluginInstances("CookiePermission");e&&e[0]&&(e[0]._hideCookieBar(),e[0]._removeBodyPadding())}},{key:"_setInitialState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e||this._getCookies("all"),n=[],r=[];t.forEach(function(e){var t=e.cookie,o=e.required;f.getItem(t)||o?n.push(t):r.push(t)}),this.lastState={active:n,inactive:r}}},{key:"_setInitialOffcanvasState",value:function(){var e=this,t=this.lastState.active,n=this._getOffCanvas();t.forEach(function(t){var r=n.querySelector('[data-cookie="'.concat(t,'"]'));r.checked=!0,e._childCheckboxEvent(r)})}},{key:"_handleWrapperTrigger",value:function(e){e.preventDefault();var t=this.options,n=t.entriesActiveClass,r=t.entriesClass,o=t.groupClass,i=e.target,a=this._findParentEl(i,r,o);a&&(a.classList.contains(n)?a.classList.remove(n):a.classList.add(n))}},{key:"_handleCheckbox",value:function(e){var t=this.options.parentInputClass,n=e.target;(n.classList.contains(t)?this._parentCheckboxEvent:this._childCheckboxEvent).call(this,n)}},{key:"_findParentEl",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e&&!e.classList.contains(n);){if(e.classList.contains(t))return e;e=e.parentElement}return null}},{key:"_isChecked",value:function(e){return!!e.checked}},{key:"_parentCheckboxEvent",value:function(e){var t=this.options.groupClass,n=this._isChecked(e),r=this._findParentEl(e,t);this._toggleWholeGroup(n,r)}},{key:"_childCheckboxEvent",value:function(e){var t=this.options.groupClass,n=this._isChecked(e),r=this._findParentEl(e,t);this._toggleParentCheckbox(n,r)}},{key:"_toggleWholeGroup",value:function(e,t){Array.from(t.querySelectorAll("input")).forEach(function(t){t.checked=e})}},{key:"_toggleParentCheckbox",value:function(e,t){var n=this.options.parentInputSelector,r=Array.from(t.querySelectorAll("input:not(".concat(n,")"))),o=Array.from(t.querySelectorAll("input:not(".concat(n,"):checked")));if(r.length>0){var i=t.querySelector(n);if(i){var a=o.length>0,u=a&&o.length!==r.length;i.checked=a,i.indeterminate=u}}}},{key:"_handleSubmit",value:function(){var e=this._getCookies("active"),t=this._getCookies("inactive"),n=this.options.cookiePreference,r=[],o=[];t.forEach(function(e){var t=e.cookie;o.push(t),f.getItem(t)&&f.removeItem(t)}),e.forEach(function(e){var t=e.cookie,n=e.value,o=e.expiration;r.push(t),t&&n&&f.setItem(t,n,o)}),f.setItem(n,"1","30"),this._handleUpdateListener(r,o),this.closeOffCanvas(document.$emitter.publish("CookieConfiguration_CloseOffCanvas"))}},{key:"acceptAllCookies",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;if(!e){this._handleAcceptAll(),this.closeOffCanvas();return}N.create(this.el);var n=window.router["frontend.cookie.offcanvas"];this._httpClient.get(n,function(e){var n=new DOMParser().parseFromString(e,"text/html");t._handleAcceptAll(n),N.remove(t.el),t._hideCookieBar()})}},{key:"_acceptAllCookiesFromCookieBar",value:function(){return this.acceptAllCookies(!0)}},{key:"_acceptAllCookiesFromOffCanvas",value:function(){return this.acceptAllCookies()}},{key:"_handleAcceptAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this._getCookies("all",e);this._setInitialState(t);var n=this.options.cookiePreference;t.forEach(function(e){var t=e.cookie,n=e.value,r=e.expiration;t&&n&&f.setItem(t,n,r)}),f.setItem(n,"1","30"),this._handleUpdateListener(t.map(function(e){return e.cookie}),[])}},{key:"_getCookies",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this,r=this.options.cookieSelector;return t||(t=this._getOffCanvas()),Array.from(t.querySelectorAll(r)).filter(function(t){switch(e){case"all":return!0;case"active":return n._isChecked(t);case"inactive":return!n._isChecked(t);default:return!1}}).map(function(e){var t=e.dataset;return{cookie:t.cookie,value:t.cookieValue,expiration:t.cookieExpiration,required:t.cookieRequired}})}},{key:"_getOffCanvas",value:function(){var e=k?k.getOffCanvas():[];return!!e&&e.length>0&&e[0]}}],q(i.prototype,n),r&&q(i,r),i}(F(l)),"options",{offCanvasPosition:"left",submitEvent:"click",cookiePreference:"cookie-preference",cookieSelector:"[data-cookie]",buttonOpenSelector:".js-cookie-configuration-button button",buttonSubmitSelector:".js-offcanvas-cookie-submit",buttonAcceptAllSelector:".js-offcanvas-cookie-accept-all",globalButtonAcceptAllSelector:".js-cookie-accept-all-button",wrapperToggleSelector:".offcanvas-cookie-entries span",parentInputSelector:".offcanvas-cookie-parent-input",customLinkSelector:'[href="'.concat(window.router["frontend.cookie.offcanvas"],'"]'),entriesActiveClass:"offcanvas-cookie-entries--active",entriesClass:"offcanvas-cookie-entries",groupClass:"offcanvas-cookie-group",parentInputClass:"offcanvas-cookie-parent-input"});var $=function(){var e,t;function n(e){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,n),this._el=e,e.$emitter=this,this._listeners=[]}return e=[{key:"publish",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new CustomEvent(e,{detail:t,cancelable:n});return this.el.dispatchEvent(r),r}},{key:"subscribe",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this,o=e.split("."),i=n.scope?t.bind(n.scope):t;if(n.once&&!0===n.once){var a=i;i=function(t){r.unsubscribe(e),a(t)}}return this.el.addEventListener(o[0],i),this.listeners.push({splitEventName:o,opts:n,cb:i}),!0}},{key:"unsubscribe",value:function(e){var t=this,n=e.split(".");return this.listeners=this.listeners.reduce(function(e,r){return r.splitEventName.sort().toString()===n.sort().toString()?t.el.removeEventListener(r.splitEventName[0],r.cb):e.push(r),e},[]),!0}},{key:"reset",value:function(){var e=this;return this.listeners.forEach(function(t){e.el.removeEventListener(t.splitEventName[0],t.cb)}),this.listeners=[],!0}},{key:"el",get:function(){return this._el},set:function(e){this._el=e}},{key:"listeners",get:function(){return this._listeners},set:function(e){this._listeners=e}}],H(n.prototype,e),t&&H(n,t),n}();function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}var J=function(){var e,n;function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,r),this.el=e,this.$emitter=new $(this.el),this._pluginName=this._getPluginName(n),this.options=this._mergeOptions(t),this._initialized=!1,this._registerInstance(),this._init()}return e=[{key:"_init",value:function(){this._initialized||(this.init(),this._initialized=!0)}},{key:"_update",value:function(){this._initialized&&this.update()}},{key:"update",value:function(){}},{key:"_registerInstance",value:function(){window.PluginManager.getPluginInstancesFromElement(this.el).set(this._pluginName,this),window.PluginManager.getPlugin(this._pluginName,!1).get("instances").push(this)}},{key:"_getPluginName",value:function(e){return!1===e?this.constructor.name:e}},{key:"_mergeOptions",value:function(e){var n=this._pluginName.replace(/([A-Z])/g,"-$1").replace(/^-/,"").toLowerCase(),r=this.parseJsonOrFail(n),o="";"function"==typeof this.el.getAttribute&&(o=this.el.getAttribute("data-".concat(n,"-options"))||"");var i=[this.constructor.options,this.options,e];r&&i.push(window.PluginConfigManager.get(this._pluginName,r));try{o&&i.push(JSON.parse(o))}catch(e){throw Error('The data attribute "data-'.concat(n,'-options" could not be parsed to json: ').concat(e.message||""))}return t().all(i.filter(function(e){return G(e,Object)&&!G(e,Array)}).map(function(e){return e||{}}))}},{key:"parseJsonOrFail",value:function(e){if("function"!=typeof this.el.getAttribute)return"";var t=this.el.getAttribute("data-".concat(e,"-config"))||"";try{return JSON.parse(t)}catch(e){return t}}}],z(r.prototype,e),n&&z(r,n),r}();function V(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){n(e);return}u.done?t(s):Promise.resolve(s).then(r,o)}function X(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){V(i,r,o,a,u,"next",e)}function u(e){V(i,r,o,a,u,"throw",e)}a(void 0)})}}function Y(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&et(e,t)}function et(e,t){return(et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function en(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r,o=Z(e);if(t){var i=Z(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return(n=r)&&("object"==(n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof n)?n:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this)}}function er(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}var eo=function(){var e,t;function n(e){Y(this,n),Q(this,"getAccessToken",void 0),this.getAccessToken=e}return e=[{key:"get",value:function(e){var t=this;return X(function(){var n,r,o;return er(this,function(i){switch(i.label){case 0:return n={"Content-Type":"application/json"},(r=t.getAccessToken())&&(n.Authorization="Bearer ".concat(r)),[4,fetch(process.env.API_SERVER+"/api"+e,{method:"GET",headers:n})];case 1:if(404===(o=i.sent()).status)throw new ea("Not found",o.status);if(!o.ok)throw new eu("Internal server error",o.status);return[2,o.json()]}})})()}},{key:"post",value:function(e,t){var n=this;return X(function(){var r,o,i;return er(this,function(a){switch(a.label){case 0:return r={"Content-Type":"application/json"},(o=n.getAccessToken())&&(r.Authorization="Bearer ".concat(o)),[4,fetch(process.env.API_SERVER+"/api"+e,{method:"POST",headers:r,body:JSON.stringify(t)})];case 1:if(404===(i=a.sent()).status)throw new ea("Not found",i.status);if(!i.ok)throw new eu("Internal server error",i.status);return[2,i.json()]}})})()}}],K(n.prototype,e),t&&K(n,t),n}(),ei=function e(t,n){Y(this,e),Q(this,"message",void 0),Q(this,"status",void 0),this.message=t,this.status=n},ea=function(e){ee(n,e);var t=en(n);function n(){return Y(this,n),t.apply(this,arguments)}return n}(ei),eu=function(e){ee(n,e);var t=en(n);function n(){return Y(this,n),t.apply(this,arguments)}return n}(ei),es=n(538);function ec(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function el(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ef=function(){var e,t;function n(e,t){var r=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,n),el(this,"api",void 0),el(this,"element",void 0),el(this,"iframe",null),el(this,"unregister",[]),this.api=e,this.element=t,this.unregister.push(this.api.on("customerChanged",function(e){r.build(e)})),this.unregister.push(this.api.on("refreshToken",function(e){r.message({type:"refreshCustomerToken",customerToken:e})})),this.unregister.push(this.api.on("customerLogout",function(){r.handleLogout()}));var o=this.api.getCustomerToken();o?this.build(o):this.handleLogout()}return e=[{key:"handleLogout",value:function(){this.iframe=null,this.element.innerHTML="No Customer Token"}},{key:"destroy",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.unregister[Symbol.iterator]();!(e=(r=o.next()).done);e=!0)(0,r.value)()}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}this.iframe=null,this.element.innerHTML=""}},{key:"build",value:function(e){}},{key:"message",value:function(e){var t,n;(n=this.iframe)===null||void 0===n||(t=n.contentWindow)===null||void 0===t||t.postMessage(e)}}],ec(n.prototype,e),t&&ec(n,t),n}();function eh(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ep(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ev(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ey(e){return(ey=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ed(e,t){return(ed=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var eb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ed(e,t)}(o,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n,r=ey(o);if(t){var i=ey(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(e=n)&&("object"==(e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)||"function"==typeof e)?e:eh(this)});function o(e,t,n){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,o),ev(eh(i=r.call(this,e,t)),"containerId",void 0),ev(eh(i),"insertArticles",void 0),i.containerId=n,i.insertArticles=a,i}return ep(o.prototype,[{key:"build",value:function(e){this.element.innerHTML="",this.iframe=document.createElement("iframe"),this.iframe.src="".concat(this.api.config.appUrl,"/iframe/widget?customerToken=").concat(e),this.iframe.style.width="100%",this.iframe.style.height="100%",this.iframe.style.backgroundColor="transparent",this.iframe.style.border="none",this.element.appendChild(this.iframe)}}]),n&&ep(o,n),o}(ef);function em(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eg(e){return(eg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ek(e,t){return(ek=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ew=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ek(e,t)}(o,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n,r=eg(o);if(t){var i=eg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(e=n)&&("object"==(e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)||"function"==typeof e)?e:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this)});function o(){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return em(o.prototype,[{key:"build",value:function(e){this.element.innerHTML="",this.iframe=document.createElement("iframe"),this.iframe.src="".concat(this.api.config.appUrl,"/iframe/cart?customerToken=").concat(e),this.iframe.style.width="100%",this.iframe.style.height="100%",this.iframe.style.backgroundColor="transparent",this.iframe.style.border="none",this.element.appendChild(this.iframe)}}]),n&&em(o,n),o}(ef);function e_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eE(e){return(eE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eS(e,t){return(eS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var eT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eS(e,t)}(o,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n,r=eE(o);if(t){var i=eE(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(e=n)&&("object"==(e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)||"function"==typeof e)?e:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this)});function o(){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return eC(o.prototype,[{key:"build",value:function(e){this.element=document.createElement("div"),this.element.style.position="fixed",this.element.style.backdropFilter="blur(10px)",this.element.style.top="0",this.element.style.left="0",this.element.style.height="100%",this.element.style.width="100%",this.element.style.padding="2rem",this.element.style.boxSizing="border-box",this.iframe=document.createElement("iframe"),this.iframe.src="".concat(this.api.config.appUrl,"/iframe/app?customerToken=").concat(e),this.iframe.style.height="100%",this.iframe.style.width="100%",this.iframe.style.backgroundColor="transparent",this.iframe.style.border="none",this.element.appendChild(this.iframe),document.body.append(this.element)}}]),n&&eC(o,n),o}(function(){var e,t;function n(e){var t=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,n),eO(this,"api",void 0),eO(this,"element",null),eO(this,"iframe",null),eO(this,"unregister",[]),this.api=e,this.unregister.push(this.api.on("customerChanged",function(e){t.build(e)})),this.unregister.push(this.api.on("refreshToken",function(e){t.message({type:"refreshCustomerToken",customerToken:e})})),this.unregister.push(this.api.on("customerLogout",function(){t.destroy()}));var r=this.api.getCustomerToken();r?this.build(r):this.destroy()}return e=[{key:"destroy",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.unregister[Symbol.iterator]();!(e=(r=o.next()).done);e=!0)(0,r.value)()}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}this.iframe=null,this.element&&(this.element.remove(),this.element=null)}},{key:"build",value:function(e){}},{key:"message",value:function(e){var t,n;(n=this.iframe)===null||void 0===n||(t=n.contentWindow)===null||void 0===t||t.postMessage(e)}}],e_(n.prototype,e),t&&e_(n,t),n}());function eP(e){this.message=e}eP.prototype=Error(),eP.prototype.name="InvalidCharacterError";var ej="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new eP("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,o=0,i=0,a="";r=t.charAt(i++);~r&&(n=o%4?64*n+r:r,o++%4)&&(a+=String.fromCharCode(255&n>>(-2*o&6))))r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return a};function eA(e){this.message=e}eA.prototype=Error(),eA.prototype.name="InvalidTokenError";let eL=function(e,t){if("string"!=typeof e)throw new eA("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(function(e){var t,n=e.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw"Illegal base64url string!"}try{return t=n,decodeURIComponent(ej(t).replace(/(.)/g,function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}catch(e){return ej(n)}}(e.split(".")[n]))}catch(e){throw new eA("Invalid token specified: "+e.message)}};function ex(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function eR(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){n(e);return}u.done?t(s):Promise.resolve(s).then(r,o)}function eI(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){eR(i,r,o,a,u,"next",e)}function u(e){eR(i,r,o,a,u,"throw",e)}a(void 0)})}}function eN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eq(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}var eB=function(){var e,t;function n(e,t){var r=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,n),eM(this,"config",void 0),eM(this,"httpClient",void 0),eM(this,"getCustomerTokenCallback",void 0),eM(this,"customerToken",null),eM(this,"eventEmitter",new es.TypedEmitter),eM(this,"appWidget",null),eM(this,"refreshTimeout",null),eM(this,"retryCounter",0),this.config=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){eM(e,t,n[t])})}return e}({appUrl:"https://tecsafe.github.io/app-ui/"},t),this.getCustomerTokenCallback=e,this.httpClient=new eo(function(){if(null===r.customerToken)throw Error("missing customer token");return r.customerToken}),window.addEventListener("message",function(e){r.listenMessage(e.data)})}return e=[{key:"initialize",value:function(){var e=this;return eI(function(){return eq(this,function(t){switch(t.label){case 0:return[4,e.reloadToken()];case 1:return t.sent(),[2]}})})()}},{key:"productDetailWidget",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new eb(this,e,t,n)}},{key:"cartWidget",value:function(e){return new ew(this,e)}},{key:"openApp",value:function(){return this.appWidget||(this.appWidget=new eT(this)),this.appWidget}},{key:"closeApp",value:function(){this.appWidget&&(this.appWidget.destroy(),this.appWidget=null)}},{key:"reloadToken",value:function(){var e=this;return eI(function(){var t,n;return eq(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e.getCustomerTokenCallback()];case 1:if((t=r.sent())===e.customerToken)return[2];if(null===t)return e.logout(),[2];if(n=eL(t),e.clearRefreshTimeout(),e.refreshTimeout=setTimeout(function(){e.reloadToken()},(n.exp-30)*1e3-Date.now()),e.customerToken&&eL(e.customerToken).sub===n.sub)return e.customerToken=t,e.retryCounter=0,e.eventEmitter.emit("refreshToken",t),[2];return e.customerToken=t,e.retryCounter=0,e.eventEmitter.emit("customerChanged",t),[3,3];case 2:if(console.error(r.sent()),e.clearRefreshTimeout(),e.retryCounter<3)return console.warn("retry in 5 seconds (".concat(e.retryCounter+1,"/3)")),e.retryCounter++,e.refreshTimeout=setTimeout(function(){e.reloadToken()},5e3),[2];return e.logout(),[3,3];case 3:return[2]}})})()}},{key:"logout",value:function(){this.clearRefreshTimeout(),this.customerToken=null,this.eventEmitter.emit("customerLogout")}},{key:"getCustomerToken",value:function(){return this.customerToken}},{key:"getCart",value:function(){var e=this;return eI(function(){return eq(this,function(t){return[2,e.httpClient.get("/cart")]})})()}},{key:"on",value:function(e,t){var n=this;return this.eventEmitter.on(e,t),function(){n.eventEmitter.off(e,t)}}},{key:"off",value:function(e,t){this.eventEmitter.off(e,t)}},{key:"emit",value:function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=this.eventEmitter).emit.apply(t,[e].concat(function(e){if(Array.isArray(e))return ex(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return ex(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ex(e,t)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))}},{key:"listenMessage",value:function(e){switch(e.type){case"addToCart":this.eventEmitter.emit("addToCart",e.itemId,e.quantity,e.price);break;case"removeFromCart":this.eventEmitter.emit("removeFromCart",e.itemId);break;case"changeCartQuantity":this.eventEmitter.emit("changeCartQuantity",e.itemId,e.quantity,e.price);break;case"openApp":this.openApp();break;case"closeApp":this.closeApp()}}},{key:"clearRefreshTimeout",value:function(){this.refreshTimeout&&(clearTimeout(this.refreshTimeout),this.refreshTimeout=null)}}],eN(n.prototype,e),t&&eN(n,t),n}();function eD(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){n(e);return}u.done?t(s):Promise.resolve(s).then(r,o)}function eF(){var e;return e=function(e,t){var n;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,function(r){switch(r.label){case 0:return[4,(n=new eB(e,t)).initialize()];case 1:return r.sent(),[2,n]}})},(eF=function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){eD(i,r,o,a,u,"next",e)}function u(e){eD(i,r,o,a,u,"throw",e)}a(void 0)})}).apply(this,arguments)}let eU={initializeTecsafeApi:function(e,t){return eF.apply(this,arguments)}};function eW(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){n(e);return}u.done?t(s):Promise.resolve(s).then(r,o)}function eH(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){eW(i,r,o,a,u,"next",e)}function u(e){eW(i,r,o,a,u,"throw",e)}a(void 0)})}}function e$(e,t,n){return(e$=eX()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&eJ(o,n.prototype),o}).apply(null,arguments)}function ez(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eG(e){return(eG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eJ(e,t){return(eJ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function eV(e){var t="function"==typeof Map?new Map:void 0;return(eV=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return e$(e,arguments,eG(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),eJ(n,e)})(e)}function eX(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function eY(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}var eK=window.PluginManager,eQ="Tecsafe_TokenAvailable",eZ=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eJ(e,t)}(i,e);var t,n,r,o=(t=eX(),function(){var e,n,r=eG(i);if(t){var o=eG(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(e=n)&&("object"==(e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)||"function"==typeof e)?e:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this)});function i(){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return n=[{key:"init",value:function(){var e=this;return eH(function(){var t;return eY(this,function(n){switch(n.label){case 0:return e.appUrl=e.el.dataset.appUrl,document.$emitter.subscribe(W,e._handleInit.bind(e)),[4,e._handleInit()];case 1:return n.sent(),(t=document.getElementById(e.options.productWidgetId))&&(e.$emitter.subscribe(eQ,e.createProductDetailWidget.bind(e,t)),e.createProductDetailWidget(t)),[2]}})})()}},{key:"reloadToken",value:function(){this.api.reloadToken()}},{key:"logout",value:function(){}},{key:"initApi",value:function(){var e=this;return eH(function(){return eY(this,function(t){switch(t.label){case 0:return[4,eU.initializeTecsafeApi(eH(function(){return eY(this,function(e){switch(e.label){case 0:return[4,fetch("/tecsafe/ofcp/token")];case 1:return[4,e.sent().json()];case 2:return[2,e.sent().token]}})}),{appUrl:e.appUrl})];case 1:return e.api=t.sent(),[2]}})})()}},{key:"_handleInit",value:function(){var e=this;return eH(function(){var t;return eY(this,function(n){switch(n.label){case 0:if(!f.getItem(e.options.cookieName))return[3,2];return[4,e.initApi()];case 1:return t=n.sent(),e.$emitter.publish(eQ),[2,t];case 2:return[2]}})})()}},{key:"createProductDetailWidget",value:function(e){return this.api?this.api.productDetailWidget(e):this.createProductDetailWidgetPlaceholder(e)}},{key:"createProductDetailWidgetPlaceholder",value:function(e){return e.innerHTML=document.getElementById("product-widget-placeholder").innerHTML,e.querySelector("a").addEventListener("click",function(e){e.preventDefault();var t=eK.getPluginInstances("CookieConfiguration");if(t.length>0){var n,r=t[0];console.debug(r),(null!=(n=Object)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](r):r instanceof n)&&"function"==typeof r.openOffCanvas&&r.openOffCanvas()}}),e}}],ez(i.prototype,n),r&&ez(i,r),i}(eV(J));(function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})(eZ,"options",{cookieName:"tecsafe-foam-configurator-enabled",urlAttribute:"data-url",appUrl:"",productWidgetId:"tecsafe-product-widget-container"}),window.PluginManager.register("Tecsafe",eZ,"[data-tecsafe-init]")})()})();