(()=>{"use strict";var e={313:e=>{var t=function(e){var t;return!!e&&"object"==typeof e&&"[object RegExp]"!==(t=Object.prototype.toString.call(e))&&"[object Date]"!==t&&e.$$typeof!==n},n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(e,t){return!1!==t.clone&&t.isMergeableObject(e)?s(Array.isArray(e)?[]:{},e,t):e}function o(e,t,n){return e.concat(t).map(function(e){return r(e,n)})}function i(e){return Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[])}function a(e,t){try{return t in e}catch(e){return!1}}function s(e,n,u){(u=u||{}).arrayMerge=u.arrayMerge||o,u.isMergeableObject=u.isMergeableObject||t,u.cloneUnlessOtherwiseSpecified=r;var c,l,f=Array.isArray(n);return f!==Array.isArray(e)?r(n,u):f?u.arrayMerge(e,n,u):(l={},(c=u).isMergeableObject(e)&&i(e).forEach(function(t){l[t]=r(e[t],c)}),i(n).forEach(function(t){(!a(e,t)||Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))&&(a(e,t)&&c.isMergeableObject(n[t])?l[t]=(function(e,t){if(!t.customMerge)return s;var n=t.customMerge(e);return"function"==typeof n?n:s})(t,c)(e[t],n[t],c):l[t]=r(n[t],c))}),l)}s.all=function(e,t){if(!Array.isArray(e))throw Error("first argument should be an array");return e.reduce(function(e,n){return s(e,n,t)},{})},e.exports=s}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,(()=>{n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t}})(),(()=>{n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}})(),(()=>{n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[]))})(),(()=>{n.u=e=>"./js/mad-tecsafe/"+e+".js"})(),(()=>{n.miniCssF=e=>{}})(),(()=>{n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}()})(),(()=>{n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={};n.l=(t,r,o,i)=>{if(e[t]){e[t].push(r);return}if(void 0!==o)for(var a,s,u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var l=u[c];if(l.getAttribute("src")==t){a=l;break}}a||(s=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.src=t),e[t]=[r];var f=(n,r)=>{a.onerror=a.onload=null,clearTimeout(h);var o=e[t];if(delete e[t],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach(e=>e(r)),n)return n(r)},h=setTimeout(f.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=f.bind(null,a.onerror),a.onload=f.bind(null,a.onload),s&&document.head.appendChild(a)}})(),(()=>{n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{n.g.importScripts&&(e=n.g.location+"");var e,t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&!e;)e=r[o--].src}if(!e)throw Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e+"../../"})(),(()=>{var e={"mad-tecsafe":0};n.f.j=(t,r)=>{var o=n.o(e,t)?e[t]:void 0;if(0!==o){if(o)r.push(o[2]);else{var i=new Promise((n,r)=>o=e[t]=[n,r]);r.push(o[2]=i);var a=n.p+n.u(t),s=Error();n.l(a,r=>{if(n.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,o[1](s)}},"chunk-"+t,t)}}};var t=(t,r)=>{var o,i,[a,s,u]=r,c=0;if(a.some(t=>0!==e[t])){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);u&&u(n)}for(t&&t(r);c<a.length;c++)i=a[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunk=self.webpackChunk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{var e,t,r,o=n(313),i=n.n(o),a=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"ucFirst",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"lcFirst",value:function(e){return e.charAt(0).toLowerCase()+e.slice(1)}},{key:"toDashCase",value:function(e){return e.replace(/([A-Z])/g,"-$1").replace(/^-/,"").toLowerCase()}},{key:"toLowerCamelCase",value:function(e,n){var r=t.toUpperCamelCase(e,n);return t.lcFirst(r)}},{key:"toUpperCamelCase",value:function(e,n){return n?e.split(n).map(function(e){return t.ucFirst(e.toLowerCase())}).join(""):t.ucFirst(e.toLowerCase())}},{key:"parsePrimitive",value:function(e){try{return/^\d+(.|,)\d+$/.test(e)&&(e=e.replace(",",".")),JSON.parse(e)}catch(t){return e.toString()}}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t,e),t}(),s=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"isNode",value:function(e){var t;return"object"==typeof e&&null!==e&&(e===document||e===window||(null!=(t=Node)&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t))}},{key:"hasAttribute",value:function(e,n){if(!t.isNode(e))throw Error("The element must be a valid HTML Node!");return"function"==typeof e.hasAttribute&&e.hasAttribute(n)}},{key:"getAttribute",value:function(e,n){var r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(r&&!1===t.hasAttribute(e,n))throw Error('The required property "'.concat(n,'" does not exist!'));if("function"!=typeof e.getAttribute){if(r)throw Error("This node doesn't support the getAttribute function!");return}return e.getAttribute(n)}},{key:"getDataAttribute",value:function(e,n){var r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],o=n.replace(/^data(|-)/,""),i=a.toLowerCamelCase(o,"-");if(!t.isNode(e)){if(r)throw Error("The passed node is not a valid HTML Node!");return}if(void 0===e.dataset){if(r)throw Error("This node doesn't support the dataset attribute!");return}var s=e.dataset[i];if(void 0===s){if(r)throw Error('The required data attribute "'.concat(n,'" does not exist on ').concat(e,"!"));return s}return a.parsePrimitive(s)}},{key:"querySelector",value:function(e,n){var r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(r&&!t.isNode(e))throw Error("The parent node is not a valid HTML Node!");var o=e.querySelector(n)||!1;if(r&&!1===o)throw Error('The required element "'.concat(n,'" does not exist in parent node!'));return o}},{key:"querySelectorAll",value:function(e,n){var r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(r&&!t.isNode(e))throw Error("The parent node is not a valid HTML Node!");var o=e.querySelectorAll(n);if(0===o.length&&(o=!1),r&&!1===o)throw Error('At least one item of "'.concat(n,'" must exist in parent node!'));return o}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t,e),t}();function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){var e,t;function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,n),this._el=e,e.$emitter=this,this._listeners=[]}return e=[{key:"publish",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new CustomEvent(e,{detail:t,cancelable:n});return this.el.dispatchEvent(r),r}},{key:"subscribe",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this,o=e.split("."),i=n.scope?t.bind(n.scope):t;if(n.once&&!0===n.once){var a=i;i=function(t){r.unsubscribe(e),a(t)}}return this.el.addEventListener(o[0],i),this.listeners.push({splitEventName:o,opts:n,cb:i}),!0}},{key:"unsubscribe",value:function(e){var t=this,n=e.split(".");return this.listeners=this.listeners.reduce(function(e,r){var o;return((function(e){if(Array.isArray(e))return u(e)})(o=r.splitEventName)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}}(o)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).sort().toString()===n.sort().toString()?t.el.removeEventListener(r.splitEventName[0],r.cb):e.push(r),e},[]),!0}},{key:"reset",value:function(){var e=this;return this.listeners.forEach(function(t){e.el.removeEventListener(t.splitEventName[0],t.cb)}),this.listeners=[],!0}},{key:"el",get:function(){return this._el},set:function(e){this._el=e}},{key:"listeners",get:function(){return this._listeners},set:function(e){this._listeners=e}}],c(n.prototype,e),t&&c(n,t),n}();function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}var p=function(){var e,t;function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),!s.isNode(e))throw Error("There is no valid element given.");this.el=e,this.$emitter=new l(this.el),this._pluginName=this._getPluginName(r),this.options=this._mergeOptions(t),this._initialized=!1,this._registerInstance(),this._init()}return e=[{key:"init",value:function(){throw Error('The "init" method for the plugin "'.concat(this._pluginName,'" is not defined.'))}},{key:"update",value:function(){}},{key:"_init",value:function(){this._initialized||(this.init(),this._initialized=!0)}},{key:"_update",value:function(){this._initialized&&this.update()}},{key:"_mergeOptions",value:function(e){var t=a.toDashCase(this._pluginName),n=s.getDataAttribute(this.el,"data-".concat(t,"-config"),!1),r=s.getAttribute(this.el,"data-".concat(t,"-options"),!1),o=[this.constructor.options,this.options,e];n&&o.push(window.PluginConfigManager.get(this._pluginName,n));try{r&&o.push(JSON.parse(r))}catch(e){throw console.error(this.el),Error('The data attribute "data-'.concat(t,'-options" could not be parsed to json: ').concat(e.message))}return i().all(o.filter(function(e){return h(e,Object)&&!h(e,Array)}).map(function(e){return e||{}}))}},{key:"_registerInstance",value:function(){window.PluginManager.getPluginInstancesFromElement(this.el).set(this._pluginName,this),window.PluginManager.getPlugin(this._pluginName,!1).get("instances").push(this)}},{key:"_getPluginName",value:function(e){return e||(e=this.constructor.name),e}}],f(n.prototype,e),t&&f(n,t),n}(),d=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"isSupported",value:function(){return"undefined"!==document.cookie}},{key:"setItem",value:function(e,t,n){if(null==e)throw Error("You must specify a key to set a cookie");var r=new Date;r.setTime(r.getTime()+864e5*n);var o="";"https:"===location.protocol&&(o="secure"),document.cookie="".concat(e,"=").concat(t,";expires=").concat(r.toUTCString(),";path=/;sameSite=lax;").concat(o)}},{key:"getItem",value:function(e){if(!e)return!1;for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return!1}},{key:"removeItem",value:function(e){document.cookie="".concat(e,"= ; expires = Thu, 01 Jan 1970 00:00:00 GMT;path=/")}},{key:"key",value:function(){return""}},{key:"clear",value:function(){}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t,e),t}(),v=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"isTouchDevice",value:function(){return"ontouchstart"in document.documentElement}},{key:"isIOSDevice",value:function(){return t.isIPhoneDevice()||t.isIPadDevice()}},{key:"isNativeWindowsBrowser",value:function(){return t.isIEBrowser()||t.isEdgeBrowser()}},{key:"isIPhoneDevice",value:function(){return!!navigator.userAgent.match(/iPhone/i)}},{key:"isIPadDevice",value:function(){return!!navigator.userAgent.match(/iPad/i)}},{key:"isIEBrowser",value:function(){return -1!==navigator.userAgent.toLowerCase().indexOf("msie")||!!navigator.userAgent.match(/Trident.*rv:\d+\./)}},{key:"isEdgeBrowser",value:function(){return!!navigator.userAgent.match(/Edge\/\d+/i)}},{key:"getList",value:function(){return{"is-touch":t.isTouchDevice(),"is-ios":t.isIOSDevice(),"is-native-windows":t.isNativeWindowsBrowser(),"is-iphone":t.isIPhoneDevice(),"is-ipad":t.isIPadDevice(),"is-ie":t.isIEBrowser(),"is-edge":t.isEdgeBrowser()}}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t,e),t}();function y(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}var g=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"iterate",value:function(e,t){if(y(e,Map)||Array.isArray(e))return e.forEach(t);if(y(e,FormData)){var n=!0,r=!1,o=void 0;try{for(var i,a=e.entries()[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;t(s[1],s[0])}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return}if(y(e,NodeList))return e.forEach(t);if(y(e,HTMLCollection))return Array.from(e).forEach(t);if(y(e,Object))return Object.keys(e).forEach(function(n){t(e[n],n)});throw Error("The element type ".concat(void 0===e?"undefined":e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e," is not iterable!"))}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t,e),t}();function b(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}var w="offcanvas",E=Object.freeze(new(function(){function e(){b(this,e),this.$emitter=new l}return k(e,[{key:"open",value:function(e,t,n,r,o,i,a){this._removeExistingOffCanvas();var s=this._createOffCanvas(n,i,a,r);this.setContent(e,r,o),this._openOffcanvas(s,t)}},{key:"setContent",value:function(e,t){var n=this.getOffCanvas();n[0]&&(n[0].innerHTML=e,this._registerEvents(t))}},{key:"setAdditionalClassName",value:function(e){this.getOffCanvas()[0].classList.add(e)}},{key:"getOffCanvas",value:function(){return document.querySelectorAll(".".concat(w))}},{key:"close",value:function(e){var t=this,n=this.getOffCanvas();g.iterate(n,function(e){bootstrap.Offcanvas.getInstance(e).hide()}),setTimeout(function(){t.$emitter.publish("onCloseOffcanvas",{offCanvasContent:n})},e)}},{key:"goBackInHistory",value:function(){window.history.back()}},{key:"exists",value:function(){return this.getOffCanvas().length>0}},{key:"_openOffcanvas",value:function(t,n){e.bsOffcanvas.show(),window.history.pushState("offcanvas-open",""),"function"==typeof n&&n()}},{key:"_registerEvents",value:function(e){var t=this,n=v.isTouchDevice()?"touchend":"click",r=this.getOffCanvas();g.iterate(r,function(n){var o=function(){setTimeout(function(){n.remove(),t.$emitter.publish("onCloseOffcanvas",{offCanvasContent:r})},e),n.removeEventListener("hide.bs.offcanvas",o)};n.addEventListener("hide.bs.offcanvas",o)}),window.addEventListener("popstate",this.close.bind(this,e),{once:!0});var o=document.querySelectorAll(".".concat("js-offcanvas-close"));g.iterate(o,function(r){return r.addEventListener(n,t.close.bind(t,e))})}},{key:"_removeExistingOffCanvas",value:function(){e.bsOffcanvas=null;var t=this.getOffCanvas();return g.iterate(t,function(e){return e.remove()})}},{key:"_getPositionClass",value:function(e){return"left"===e?"offcanvas-start":"right"===e?"offcanvas-end":"offcanvas-".concat(e)}},{key:"_createOffCanvas",value:function(t,n,r,o){var i=document.createElement("div");if(i.classList.add(w),i.classList.add(this._getPositionClass(t)),!0===n&&i.classList.add("is-fullwidth"),r){var a=void 0===r?"undefined":r&&"undefined"!=typeof Symbol&&r.constructor===Symbol?"symbol":typeof r;if("string"===a)i.classList.add(r);else if(Array.isArray(r))r.forEach(function(e){i.classList.add(e)});else throw Error('The type "'.concat(a,'" is not supported. Please pass an array or a string.'))}return document.body.appendChild(i),e.bsOffcanvas=new bootstrap.Offcanvas(i,{backdrop:!1!==o||"static"}),i}}]),e}())),_=function(){function e(){b(this,e)}return k(e,null,[{key:"open",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",r=!(arguments.length>3)||void 0===arguments[3]||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";E.open(e,t,n,r,o,i,a)}},{key:"setContent",value:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:350;E.setContent(e,t,n)}},{key:"setAdditionalClassName",value:function(e){E.setAdditionalClassName(e)}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:350;E.close(e)}},{key:"exists",value:function(){return E.exists()}},{key:"getOffCanvas",value:function(){return E.getOffCanvas()}},{key:"REMOVE_OFF_CANVAS_DELAY",value:function(){return 350}}]),e}();function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){var e,t;function n(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,n),this._request=null,this._errorHandlingInternal=!1}return e=[{key:"get",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json",r=this._createPreparedRequest("GET",e,n);return this._sendRequest(r,null,t)}},{key:"post",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";r=this._getContentType(t,r);var o=this._createPreparedRequest("POST",e,r);return this._sendRequest(o,t,n)}},{key:"delete",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";r=this._getContentType(t,r);var o=this._createPreparedRequest("DELETE",e,r);return this._sendRequest(o,t,n)}},{key:"patch",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";r=this._getContentType(t,r);var o=this._createPreparedRequest("PATCH",e,r);return this._sendRequest(o,t,n)}},{key:"abort",value:function(){if(this._request)return this._request.abort()}},{key:"setErrorHandlingInternal",value:function(e){this._errorHandlingInternal=e}},{key:"_registerOnLoaded",value:function(e,t){t&&(!0===this._errorHandlingInternal?(e.addEventListener("load",function(){t(e.responseText,e)}),e.addEventListener("abort",function(){console.warn("the request to ".concat(e.responseURL," was aborted"))}),e.addEventListener("error",function(){console.warn("the request to ".concat(e.responseURL," failed with status ").concat(e.status))}),e.addEventListener("timeout",function(){console.warn("the request to ".concat(e.responseURL," timed out"))})):e.addEventListener("loadend",function(){t(e.responseText,e)}))}},{key:"_sendRequest",value:function(e,t,n){return this._registerOnLoaded(e,n),e.send(t),e}},{key:"_getContentType",value:function(e,t){var n;return(null!=(n=FormData)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](e):e instanceof n)&&(t=!1),t}},{key:"_createPreparedRequest",value:function(e,t,n){return this._request=new XMLHttpRequest,this._request.open(e,t),this._request.setRequestHeader("X-Requested-With","XMLHttpRequest"),n&&this._request.setRequestHeader("Content-type",n),this._request}}],O(n.prototype,e),t&&O(n,t),n}();function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var T="loader",P={BEFORE:"before",INNER:"inner"},A=function(){var e,t;function n(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P.BEFORE;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,n),this.parent=(null!=(t=Element)&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t)?e:document.body.querySelector(e),this.position=r}return e=[{key:"create",value:function(){if(!this.exists()){if(this.position===P.INNER){this.parent.innerHTML=n.getTemplate();return}this.parent.insertAdjacentHTML(this._getPosition(),n.getTemplate())}}},{key:"remove",value:function(){var e=this.parent.querySelectorAll(".".concat(T));g.iterate(e,function(e){return e.remove()})}},{key:"exists",value:function(){return this.parent.querySelectorAll(".".concat(T)).length>0}},{key:"_getPosition",value:function(){return this.position===P.BEFORE?"afterbegin":"beforeend"}}],t=[{key:"getTemplate",value:function(){return'<div class="'.concat(T,'" role="status">\n                    <span class="').concat("visually-hidden",'">Loading...</span>\n                </div>')}},{key:"SELECTOR_CLASS",value:function(){return T}}],e&&C(n.prototype,e),t&&C(n,t),n}();function L(e,t,n){return(L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n||e):o.value}})(e,t,n||e)}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var I=null,N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(o,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n,r=j(o);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(e=n)&&("object"==(e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)||"function"==typeof e)?e:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this)});function o(){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return n=[{key:"open",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"left",o=!(arguments.length>4)||void 0===arguments[4]||arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:_.REMOVE_OFF_CANVAS_DELAY(),a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"";if(!e)throw Error("A url must be given!");E._removeExistingOffCanvas();var u=E._createOffCanvas(r,a,s,o);this.setContent(e,t,n,o,i),E._openOffcanvas(u)}},{key:"setContent",value:function(e,t,n,r,i){var a=this,s=new S;L(j(o),"setContent",this).call(this,'<div class="offcanvas-body">'.concat(A.getTemplate(),"</div>"),r,i),I&&I.abort();var u=function(e){L(j(o),"setContent",a).call(a,e,r,i),"function"==typeof n&&n(e)};I=t?s.post(e,t,o.executeCallback.bind(this,u)):s.get(e,o.executeCallback.bind(this,u))}},{key:"executeCallback",value:function(e,t){"function"==typeof e&&e(t),window.PluginManager.initializePlugins()}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(o,n),o}(_);function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var D="element-loader-backdrop",U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(o,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n,r=x(o);if(t){var i=x(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(e=n)&&("object"==(e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)||"function"==typeof e)?e:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this)});function o(){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return n=[{key:"create",value:function(e){e.classList.add("has-element-loader"),o.exists(e)||(o.appendLoader(e),setTimeout(function(){var t=e.querySelector(".".concat(D));t&&t.classList.add("element-loader-backdrop-open")},1))}},{key:"remove",value:function(e){e.classList.remove("has-element-loader");var t=e.querySelector(".".concat(D));t&&t.remove()}},{key:"exists",value:function(e){return e.querySelectorAll(".".concat(D)).length>0}},{key:"getTemplate",value:function(){return'\n        <div class="'.concat(D,'">\n            <div class="loader" role="status">\n                <span class="').concat("visually-hidden",'">Loading...</span>\n            </div>\n        </div>\n        ')}},{key:"appendLoader",value:function(e){e.insertAdjacentHTML("beforeend",o.getTemplate())}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(o,n),o}(A);function F(e,t,n){return(F=$()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&B(o,n.prototype),o}).apply(null,arguments)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){var t="function"==typeof Map?new Map:void 0;return(H=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return F(e,arguments,W(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),B(n,e)})(e)}function $(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var z="CookieConfiguration_Update";function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(i,e);var t,n,r,o=(t=$(),function(){var e,n,r=W(i);if(t){var o=W(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(e=n)&&("object"==(e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)||"function"==typeof e)?e:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this)});function i(){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return n=[{key:"init",value:function(){this.lastState={active:[],inactive:[]},this._httpClient=new S,this._registerEvents()}},{key:"_registerEvents",value:function(){var e=this,t=this.options,n=t.submitEvent,r=t.buttonOpenSelector,o=t.customLinkSelector,i=t.globalButtonAcceptAllSelector;Array.from(document.querySelectorAll(r)).forEach(function(t){t.addEventListener(n,e.openOffCanvas.bind(e))}),Array.from(document.querySelectorAll(o)).forEach(function(t){t.addEventListener(n,e._handleCustomLink.bind(e))}),Array.from(document.querySelectorAll(i)).forEach(function(t){t.addEventListener(n,e._acceptAllCookiesFromCookieBar.bind(e))})}},{key:"_registerOffCanvasEvents",value:function(){var e=this,t=this.options,n=t.submitEvent,r=t.buttonSubmitSelector,o=t.buttonAcceptAllSelector,i=t.wrapperToggleSelector,a=this._getOffCanvas();if(a){var s=a.querySelector(r),u=a.querySelector(o),c=Array.from(a.querySelectorAll('input[type="checkbox"]')),l=Array.from(a.querySelectorAll(i));s&&s.addEventListener(n,this._handleSubmit.bind(this,d)),u&&u.addEventListener(n,this._acceptAllCookiesFromOffCanvas.bind(this,d)),c.forEach(function(t){t.addEventListener(n,e._handleCheckbox.bind(e))}),l.forEach(function(t){t.addEventListener(n,e._handleWrapperTrigger.bind(e))})}}},{key:"_handleCustomLink",value:function(e){e.preventDefault(),this.openOffCanvas()}},{key:"_handleUpdateListener",value:function(e,t){var n=this._getUpdatedCookies(e,t);document.$emitter.publish(z,n)}},{key:"_getUpdatedCookies",value:function(e,t){var n=this.lastState,r={};return e.forEach(function(e){n.inactive.includes(e)&&(r[e]=!0)}),t.forEach(function(e){n.active.includes(e)&&(r[e]=!1)}),r}},{key:"openOffCanvas",value:function(e){var t=this.options.offCanvasPosition,n=window.router["frontend.cookie.offcanvas"];this._hideCookieBar(),N.open(n,!1,this._onOffCanvasOpened.bind(this,e),t)}},{key:"closeOffCanvas",value:function(e){N.close(),"function"==typeof e&&e()}},{key:"_onOffCanvasOpened",value:function(e){this._registerOffCanvasEvents(),this._setInitialState(),this._setInitialOffcanvasState(),PluginManager.initializePlugins(),"function"==typeof e&&e()}},{key:"_hideCookieBar",value:function(){var e=PluginManager.getPluginInstances("CookiePermission");e&&e[0]&&(e[0]._hideCookieBar(),e[0]._removeBodyPadding())}},{key:"_setInitialState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e||this._getCookies("all"),n=[],r=[];t.forEach(function(e){var t=e.cookie,o=e.required;d.getItem(t)||o?n.push(t):r.push(t)}),this.lastState={active:n,inactive:r}}},{key:"_setInitialOffcanvasState",value:function(){var e=this,t=this.lastState.active,n=this._getOffCanvas();t.forEach(function(t){var r=n.querySelector('[data-cookie="'.concat(t,'"]'));r.checked=!0,e._childCheckboxEvent(r)})}},{key:"_handleWrapperTrigger",value:function(e){e.preventDefault();var t=this.options,n=t.entriesActiveClass,r=t.entriesClass,o=t.groupClass,i=e.target,a=this._findParentEl(i,r,o);a&&(a.classList.contains(n)?a.classList.remove(n):a.classList.add(n))}},{key:"_handleCheckbox",value:function(e){var t=this.options.parentInputClass,n=e.target;(n.classList.contains(t)?this._parentCheckboxEvent:this._childCheckboxEvent).call(this,n)}},{key:"_findParentEl",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e&&!e.classList.contains(n);){if(e.classList.contains(t))return e;e=e.parentElement}return null}},{key:"_isChecked",value:function(e){return!!e.checked}},{key:"_parentCheckboxEvent",value:function(e){var t=this.options.groupClass,n=this._isChecked(e),r=this._findParentEl(e,t);this._toggleWholeGroup(n,r)}},{key:"_childCheckboxEvent",value:function(e){var t=this.options.groupClass,n=this._isChecked(e),r=this._findParentEl(e,t);this._toggleParentCheckbox(n,r)}},{key:"_toggleWholeGroup",value:function(e,t){Array.from(t.querySelectorAll("input")).forEach(function(t){t.checked=e})}},{key:"_toggleParentCheckbox",value:function(e,t){var n=this.options.parentInputSelector,r=Array.from(t.querySelectorAll("input:not(".concat(n,")"))),o=Array.from(t.querySelectorAll("input:not(".concat(n,"):checked")));if(r.length>0){var i=t.querySelector(n);if(i){var a=o.length>0,s=a&&o.length!==r.length;i.checked=a,i.indeterminate=s}}}},{key:"_handleSubmit",value:function(){var e=this._getCookies("active"),t=this._getCookies("inactive"),n=this.options.cookiePreference,r=[],o=[];t.forEach(function(e){var t=e.cookie;o.push(t),d.getItem(t)&&d.removeItem(t)}),e.forEach(function(e){var t=e.cookie,n=e.value,o=e.expiration;r.push(t),t&&n&&d.setItem(t,n,o)}),d.setItem(n,"1","30"),this._handleUpdateListener(r,o),this.closeOffCanvas(document.$emitter.publish("CookieConfiguration_CloseOffCanvas"))}},{key:"acceptAllCookies",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;if(!e){this._handleAcceptAll(),this.closeOffCanvas();return}U.create(this.el);var n=window.router["frontend.cookie.offcanvas"];this._httpClient.get(n,function(e){var n=new DOMParser().parseFromString(e,"text/html");t._handleAcceptAll(n),U.remove(t.el),t._hideCookieBar()})}},{key:"_acceptAllCookiesFromCookieBar",value:function(){return this.acceptAllCookies(!0)}},{key:"_acceptAllCookiesFromOffCanvas",value:function(){return this.acceptAllCookies()}},{key:"_handleAcceptAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this._getCookies("all",e);this._setInitialState(t);var n=this.options.cookiePreference;t.forEach(function(e){var t=e.cookie,n=e.value,r=e.expiration;t&&n&&d.setItem(t,n,r)}),d.setItem(n,"1","30"),this._handleUpdateListener(t.map(function(e){return e.cookie}),[])}},{key:"_getCookies",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this,r=this.options.cookieSelector;return t||(t=this._getOffCanvas()),Array.from(t.querySelectorAll(r)).filter(function(t){switch(e){case"all":return!0;case"active":return n._isChecked(t);case"inactive":return!n._isChecked(t);default:return!1}}).map(function(e){var t=e.dataset;return{cookie:t.cookie,value:t.cookieValue,expiration:t.cookieExpiration,required:t.cookieRequired}})}},{key:"_getOffCanvas",value:function(){var e=_?_.getOffCanvas():[];return!!e&&e.length>0&&e[0]}}],q(i.prototype,n),r&&q(i,r),i}(H(p)),"options",{offCanvasPosition:"left",submitEvent:"click",cookiePreference:"cookie-preference",cookieSelector:"[data-cookie]",buttonOpenSelector:".js-cookie-configuration-button button",buttonSubmitSelector:".js-offcanvas-cookie-submit",buttonAcceptAllSelector:".js-offcanvas-cookie-accept-all",globalButtonAcceptAllSelector:".js-cookie-accept-all-button",wrapperToggleSelector:".offcanvas-cookie-entries span",parentInputSelector:".offcanvas-cookie-parent-input",customLinkSelector:'[href="'.concat(window.router["frontend.cookie.offcanvas"],'"]'),entriesActiveClass:"offcanvas-cookie-entries--active",entriesClass:"offcanvas-cookie-entries",groupClass:"offcanvas-cookie-group",parentInputClass:"offcanvas-cookie-parent-input"});var J=function(){var e,t;function n(e){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,n),this._el=e,e.$emitter=this,this._listeners=[]}return e=[{key:"publish",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new CustomEvent(e,{detail:t,cancelable:n});return this.el.dispatchEvent(r),r}},{key:"subscribe",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this,o=e.split("."),i=n.scope?t.bind(n.scope):t;if(n.once&&!0===n.once){var a=i;i=function(t){r.unsubscribe(e),a(t)}}return this.el.addEventListener(o[0],i),this.listeners.push({splitEventName:o,opts:n,cb:i}),!0}},{key:"unsubscribe",value:function(e){var t=this,n=e.split(".");return this.listeners=this.listeners.reduce(function(e,r){return r.splitEventName.sort().toString()===n.sort().toString()?t.el.removeEventListener(r.splitEventName[0],r.cb):e.push(r),e},[]),!0}},{key:"reset",value:function(){var e=this;return this.listeners.forEach(function(t){e.el.removeEventListener(t.splitEventName[0],t.cb)}),this.listeners=[],!0}},{key:"el",get:function(){return this._el},set:function(e){this._el=e}},{key:"listeners",get:function(){return this._listeners},set:function(e){this._listeners=e}}],G(n.prototype,e),t&&G(n,t),n}();function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}var V=function(){var e,t;function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,n),this.el=e,this.$emitter=new J(this.el),this._pluginName=this._getPluginName(r),this.options=this._mergeOptions(t),this._initialized=!1,this._registerInstance(),this._init()}return e=[{key:"_init",value:function(){this._initialized||(this.init(),this._initialized=!0)}},{key:"_update",value:function(){this._initialized&&this.update()}},{key:"update",value:function(){}},{key:"_registerInstance",value:function(){window.PluginManager.getPluginInstancesFromElement(this.el).set(this._pluginName,this),window.PluginManager.getPlugin(this._pluginName,!1).get("instances").push(this)}},{key:"_getPluginName",value:function(e){return!1===e?this.constructor.name:e}},{key:"_mergeOptions",value:function(e){var t=this._pluginName.replace(/([A-Z])/g,"-$1").replace(/^-/,"").toLowerCase(),n=this.parseJsonOrFail(t),r="";"function"==typeof this.el.getAttribute&&(r=this.el.getAttribute("data-".concat(t,"-options"))||"");var o=[this.constructor.options,this.options,e];n&&o.push(window.PluginConfigManager.get(this._pluginName,n));try{r&&o.push(JSON.parse(r))}catch(e){throw Error('The data attribute "data-'.concat(t,'-options" could not be parsed to json: ').concat(e.message||""))}return i().all(o.filter(function(e){return Y(e,Object)&&!Y(e,Array)}).map(function(e){return e||{}}))}},{key:"parseJsonOrFail",value:function(e){if("function"!=typeof this.el.getAttribute)return"";var t=this.el.getAttribute("data-".concat(e,"-config"))||"";try{return JSON.parse(t)}catch(e){return t}}}],Q(n.prototype,e),t&&Q(n,t),n}();(function(e){e.CUSTOMER="customer",e.SALES_CHANNEL="sales-channel",e.INTERNAL="internal"})(e||(e={}));function K(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){n(e);return}s.done?t(u):Promise.resolve(u).then(r,o)}function Z(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){K(i,r,o,a,s,"next",e)}function s(e){K(i,r,o,a,s,"throw",e)}a(void 0)})}}function X(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function ee(){return(ee=Z(function(t,r){var o,i,a;return X(this,function(s){switch(s.label){case 0:if(s.trys.push([0,5,,6]),r)return[3,1];if(3!==(o=t.split(".")).length||(i=JSON.parse(atob(o[1])),!Object.values(e).includes(i.type)))return[2,null];return[2,i];case 1:return[4,n.e("custom_plugins_MadTecsafe_src_Resources_app_storefront_node_modules_jose_dist_browser_index_js").then(n.bind(n,274))];case 2:return[4,(0,s.sent().jwtVerify)(t,r)];case 3:if(a=s.sent().payload,!Object.values(e).includes(a.type))return[2,null];return[2,a];case 4:return[3,6];case 5:return console.warn("Failed to parse and/or validate JWT token",s.sent()),[3,6];case 6:return[2,null]}})})).apply(this,arguments)}function et(e,t){return en.apply(this,arguments)}function en(){return(en=Z(function(t,n){var r;return X(this,function(o){switch(o.label){case 0:return[4,function(e,t){return ee.apply(this,arguments)}(t,n)];case 1:if(!(r=o.sent())||r.type!==e.CUSTOMER)return[2,null];return[2,r]}})})).apply(this,arguments)}function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function eo(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){n(e);return}s.done?t(u):Promise.resolve(u).then(r,o)}function ei(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){eo(i,r,o,a,s,"next",e)}function s(e){eo(i,r,o,a,s,"throw",e)}a(void 0)})}}function ea(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function es(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eu(e,t,n){return t&&es(e.prototype,t),n&&es(e,n),e}function ec(e){return(ec=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function el(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ef(e,t)}function ef(e,t){return(ef=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function eh(e){return function(e){if(Array.isArray(e))return er(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return er(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return er(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ep(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r,o=ec(e);if(t){var i=ec(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return(n=r)&&("object"==(n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof n)?n:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this)}}function ed(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function ev(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}function ey(e,t){return Object.keys(t).forEach(function(n){"default"===n||"__esModule"===n||Object.prototype.hasOwnProperty.call(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})}),e}ev({},"TecsafeApi",function(){return eP}),ev({},"OfcpConfig",function(){return eg});var eg=function e(){ea(this,e),this.widgetBaseURL="https://tecsafe.github.io/app-ui/iframe",this.allowedOrigins=["https://tecsafe.github.io"],this.iframeTransition="height 0.3s ease-in-out",this.styles={}},eb={},em={};ev(em,"MessageType",function(){return t}),function(e){e.PING="tecsafe-ofcp-ping",e.PONG="tecsafe-ofcp-pong",e.SET_TOKEN="set-token",e.REQUEST_TOKEN="request-token",e.OPEN_FULL_SCREEN="open-full-screen",e.CLOSE_FULL_SCREEN="close-full-screen",e.DESTROY_FULL_SCREEN="destroy-full-screen",e.FULL_SCREEN_OPENED="full-screen-opened",e.FULL_SCREEN_CLOSED="full-screen-closed",e.REQUEST_FULL_SCREEN_STATE="request-full-screen-state",e.UPDATE_FULL_SCREEN_URL="update-full-screen-url",e.STYLES_REQUEST_DATA="styles-request-data",e.STYLES_SEND_DATA="styles-send-data",e.META_REQUEST_DATA="meta-request-data",e.META_SEND_DATA="meta-send-data",e.CALL_PARENT_EVENT="call-parent-event",e.SIZE_UPDATE="size-update"}(t||(t={})),ey(eb,em),ey(eb,{}),ey(eb,{}),ey(eb,{}),ey(eb,{}),ey(eb,{}),ey(eb,{}),ey(eb,{}),ey(eb,{}),ey(eb,{}),ey(eb,{}),ey(eb,{}),ey(eb,{}),ey(eb,{}),ey(eb,{}),ey(eb,{}),ey(eb,{}),ey(eb,{}),ev({},"AppWidget",function(){return eS}),ev({},"BaseWidget",function(){return ek});var ek=function(){function e(t,n,r){ea(this,e),this.config=t,this.el=n,this.api=r,this.iframe=null,this.uiPath="iframe",window.addEventListener("message",this.onMessage.bind(this))}return eu(e,[{key:"sendMessage",value:function(e){if(this.iframe){var t,n=new URL(this.iframe.src).origin;if(!this.config.allowedOrigins.includes(n)){console.error("[OFCP] Widget",this.el,"cannot send message to origin",n);return}(t=this.iframe.contentWindow)===null||void 0===t||t.postMessage(e,n)}}},{key:"onMessage",value:function(e){var n=this;return ei(function(){var r,o,i,a,s,u,c,l,f,h;return ed(this,function(p){switch(p.label){case 0:if(!n.iframe||!n.config.allowedOrigins.includes(e.origin)||e.source!==n.iframe.contentWindow||"object"!=typeof e.data||!e.data.type)return[2];switch(e.data.type){case t.REQUEST_TOKEN:return[3,1];case t.OPEN_FULL_SCREEN:return[3,3];case t.CLOSE_FULL_SCREEN:return[3,4];case t.DESTROY_FULL_SCREEN:return[3,5];case t.STYLES_REQUEST_DATA:return[3,6];case t.PING:return[3,7];case t.SIZE_UPDATE:return[3,8];case t.CALL_PARENT_EVENT:return[3,9];case t.META_REQUEST_DATA:return[3,10];case t.REQUEST_FULL_SCREEN_STATE:return[3,11]}return[3,12];case 1:return r=n.sendMessage,o={type:t.SET_TOKEN},[4,n.api.getToken()];case 2:return r.apply(n,[(o.payload=p.sent(),o)]),[3,12];case 3:i=e.data;try{n.api.openFullScreen(i.payload)}catch(e){console.error("[OFCP] Widget",n.el,"failed to open full screen",e)}return[3,12];case 4:return n.api.closeFullScreen(),[3,12];case 5:return n.api.closeFullScreen(!0),[3,12];case 6:return n.sendMessage({type:t.STYLES_SEND_DATA,payload:n.config.styles}),[3,12];case 7:return n.sendMessage({type:t.PONG,payload:"1.2.1"}),[3,12];case 8:return n.iframe.style.height="".concat(e.data.payload,"px"),[3,12];case 9:a=e.data,s=n.api.getEventListeners()[a.payload.event],u=!0,c=!1,l=void 0;try{for(f=s[Symbol.iterator]();!(u=(h=f.next()).done);u=!0)h.value.apply(void 0,eh(a.payload.args||[]))}catch(e){c=!0,l=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw l}}return[3,12];case 10:return n.sendMessage({type:t.META_SEND_DATA,payload:{registeredEvents:Object.keys(n.api.getEventListeners())}}),[3,12];case 11:return n.api.getAppWidget().isOpen()?n.sendMessage({type:t.FULL_SCREEN_OPENED}):n.sendMessage({type:t.FULL_SCREEN_CLOSED}),[3,12];case 12:return[2]}})})()}},{key:"show",value:function(){if(this.preShow(),this.iframe){this.iframe.style.display="block",this.postShow();return}this.preCreate(),this.iframe=document.createElement("iframe"),this.iframe.src="".concat(this.config.widgetBaseURL,"/").concat(this.uiPath);var e=this.iframe.style;e.width="100%",e.height="0px",e.backgroundColor="transparent",e.border="none",e.transition=this.config.iframeTransition,this.iframe.setAttribute("allowtransparency","true"),this.el.appendChild(this.iframe),this.postCreate(),this.postShow()}},{key:"isOpen",value:function(){return!!this.iframe&&"none"!==this.iframe.style.display}},{key:"getIframe",value:function(){return this.iframe}},{key:"destroy",value:function(){this.iframe&&(this.preDestroy(),this.el.innerHTML="",this.iframe=null,this.postDestroy())}},{key:"hide",value:function(){this.iframe&&(this.preHide(),this.iframe.style.display="none",this.postHide())}},{key:"onMessageExtended",value:function(e){return ei(function(){return ed(this,function(e){return[2,!1]})})()}},{key:"preShow",value:function(){}},{key:"postShow",value:function(){}},{key:"preCreate",value:function(){}},{key:"postCreate",value:function(){}},{key:"preDestroy",value:function(){}},{key:"postDestroy",value:function(){}},{key:"preHide",value:function(){}},{key:"postHide",value:function(){}}]),e}(),ew={};function eE(e){var t=new URL(window.location.href);t.searchParams.set("x-ofcp-bid",e.browserId),t.searchParams.set("x-ofcp-url",e.url),window.history.replaceState({},"",t.toString())}function e_(){var e=new URL(window.location.href);return{browserId:e.searchParams.get("x-ofcp-bid")||"",url:e.searchParams.get("x-ofcp-url")||""}}function eO(){var e=new URL(window.location.href);e.searchParams.delete("x-ofcp-bid"),e.searchParams.delete("x-ofcp-url"),window.history.replaceState({},"",e.toString())}ev(ew,"writeUrlParams",function(){return eE}),ev(ew,"readUrlParams",function(){return e_}),ev(ew,"clearUrlParams",function(){return eO});var eS=function(e){el(r,e);var n=ep(r);function r(){for(var e,t=arguments.length,o=Array(t),i=0;i<t;i++)o[i]=arguments[i];return ea(this,r),(e=n.call.apply(n,[this].concat(eh(o)))).uiPath="",e}return eu(r,[{key:"setUrl",value:function(e){var t=new URL(e).origin;if(!this.config.allowedOrigins.includes(t))throw Error("[OFCP] Widget ".concat(this.el," cannot set url to origin ").concat(t));this.url=e,eE({browserId:this.api.getBrowserId(),url:e}),this.show()}},{key:"getUrl",value:function(){return this.url}},{key:"preCreate",value:function(){document.body.contains(this.el)||(this.el=document.createElement("div"),document.body.appendChild(this.el))}},{key:"postCreate",value:function(){if(this.iframe){var e=this.iframe.style;e.position="fixed",e.top="0",e.left="0",e.width="100vw",e.height="100vh",e.zIndex="1000000"}}},{key:"onMessageExtended",value:function(e){var n=this;return ei(function(){var r;return ed(this,function(o){return e.data.type!==t.UPDATE_FULL_SCREEN_URL?[2,!1]:(r=e.data.payload,eE({browserId:n.api.getBrowserId(),url:r}),[2,!0])})})()}},{key:"handlePageLoad",value:function(){var e=this.iframe.contentWindow.location.href,t=new URL(e).origin;this.config.allowedOrigins.includes(t)||(this.destroy(),console.error("[OFCP] Widget",this.el,"cannot load url",e))}},{key:"postShow",value:function(){if(!this.url)throw this.destroy(),Error("[OFCP] Widget ".concat(this.el," cannot show without a url"));this.iframe.src!==this.url&&(this.iframe.src=this.url);var e=document.body.style;e.overflow="hidden",e.paddingRight||(e.paddingRight="15px"),eE({browserId:this.api.getBrowserId(),url:this.url})}},{key:"resetParentPage",value:function(){var e=document.body.style;e.overflow="","15px"===e.paddingRight&&(e.paddingRight=""),eO()}},{key:"postDestroy",value:function(){this.resetParentPage(),document.body.removeChild(this.el)}},{key:"postHide",value:function(){this.resetParentPage()}}]),r}(ek);ev({},"CartWidget",function(){return eC});var eC=function(e){el(n,e);var t=ep(n);function n(){for(var e,r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return ea(this,n),(e=t.call.apply(t,[this].concat(eh(o)))).uiPath="cart",e}return n}(ek);ev({},"ProductDetailWidget",function(){return eT});var eT=function(e){el(n,e);var t=ep(n);function n(){for(var e,r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return ea(this,n),(e=t.call.apply(t,[this].concat(eh(o)))).uiPath="product-detail",e}return n}(ek),eP=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new eg;ea(this,e),this.tokenFN=t,this.config=n,this.widgets=[],this.tokenPromise=null,this.refreshTimeoutId=null,this.eventListeners={},new URL(n.widgetBaseURL),this.appWidget=new eS(n,document.createElement("div"),this),this.browserId=localStorage.getItem("ofcp-bid"),this.browserId||(this.browserId=Math.random().toString(36).slice(2),localStorage.setItem("ofcp-bid",this.browserId));var r=e_();if(r.browserId){if(this.browserId!==r.browserId){eO(),console.warn("[OFCP] Browser ID mismatch, clearing URL params");return}try{this.openFullScreen(r.url)}catch(e){console.error("[OFCP] Failed to open full screen:",e)}}}return eu(e,[{key:"addEventListener",value:function(e,t){this.eventListeners[e]||(this.eventListeners[e]=[]),this.eventListeners[e].push(t)}},{key:"removeEventListener",value:function(e,t){if(this.eventListeners[e]){var n=this.eventListeners[e].indexOf(t);-1!==n&&this.eventListeners[e].splice(n,1),0===this.eventListeners[e].length&&delete this.eventListeners[e]}}},{key:"getEventListeners",value:function(){return this.eventListeners}},{key:"getBrowserId",value:function(){return this.browserId}},{key:"openFullScreen",value:function(e){this.appWidget.setUrl(e),this.sendToAllWidgets({type:t.FULL_SCREEN_OPENED,payload:null})}},{key:"closeFullScreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?this.appWidget.destroy():this.appWidget.hide(),this.sendToAllWidgets({type:t.FULL_SCREEN_CLOSED,payload:null})}},{key:"sendToAllWidgets",value:function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this.widgets[Symbol.iterator]();!(t=(o=i.next()).done);t=!0)o.value.sendMessage(e)}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}this.appWidget.sendMessage(e)}},{key:"saveToken",value:function(e){var t=this;return ei(function(){var n,r;return ed(this,function(o){switch(o.label){case 0:return t.refreshTimeoutId&&clearTimeout(t.refreshTimeoutId),t.token=e,[4,et(t.token)];case 1:return(n=o.sent())||console.error("[OFCP] Failed to parse token, is the tokenFN correctly implemented?"),r=Date.now()+6e4,t.tokenTimeout=n?Math.max(1e3*n.exp-6e4,r):r,t.refreshTimeoutId=setTimeout(function(){return t.refreshToken()},t.tokenTimeout-Date.now()),[2,e]}})})()}},{key:"getToken",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;return ei(function(){var n,r;return ed(this,function(o){switch(o.label){case 0:if(!e&&t.tokenTimeout>Date.now())return[2,t.token];if(t.tokenPromise)return[2,t.tokenPromise];return t.tokenPromise=t.tokenFN(),r=t.saveToken,[4,t.tokenPromise];case 1:return[4,r.apply(t,[o.sent()])];case 2:return n=o.sent(),t.tokenPromise=null,[2,n]}})})()}},{key:"refreshToken",value:function(e){var n=this;return ei(function(){return ed(this,function(r){switch(r.label){case 0:if(!e)return[3,2];return[4,n.saveToken(e)];case 1:return r.sent(),[3,4];case 2:return[4,n.getToken(!0)];case 3:e=r.sent(),r.label=4;case 4:return n.sendToAllWidgets({type:t.SET_TOKEN,payload:e}),[2]}})})()}},{key:"destroyAll",value:function(){var e=this;return ei(function(){var t,n,r,o,i;return ed(this,function(a){e.refreshTimeoutId&&clearTimeout(e.refreshTimeoutId),e.refreshTimeoutId=null,e.appWidget.destroy(),t=!0,n=!1,r=void 0;try{for(o=e.widgets[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)i.value.destroy()}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e.widgets=[],[2]})})()}},{key:"createWidget",value:function(e){return this.widgets.push(e),e.show(),e}},{key:"createCartWidget",value:function(e){return this.createWidget(new eC(this.config,e,this))}},{key:"createProductDetailWidget",value:function(e){return this.createWidget(new eT(this.config,e,this))}},{key:"getAppWidget",value:function(){return this.appWidget}},{key:"getConfig",value:function(){return this.config}},{key:"getWidgets",value:function(){return this.widgets}},{key:"getTokenTimeout",value:function(){return this.tokenTimeout}},{key:"setFullScreenData",value:function(e){this.fullScreenData=e}},{key:"getFullScreenData",value:function(){return this.fullScreenData}}]),e}();function eA(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){n(e);return}s.done?t(u):Promise.resolve(u).then(r,o)}function eL(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){eA(i,r,o,a,s,"next",e)}function s(e){eA(i,r,o,a,s,"throw",e)}a(void 0)})}}function ej(e,t,n){return(ej=eM()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&eN(o,n.prototype),o}).apply(null,arguments)}function eR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eI(e){return(eI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eN(e,t){return(eN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ex(e){var t="function"==typeof Map?new Map:void 0;return(ex=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return ej(e,arguments,eI(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),eN(n,e)})(e)}function eM(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function eD(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}ev({},"EventType",function(){return r}),function(e){e.ON_LOGIN_REQUEST="onLoginRequest"}(r||(r={}));var eU=window.PluginManager,eF="Tecsafe_TokenAvailable",eq=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eN(e,t)}(i,e);var t,n,r,o=(t=eM(),function(){var e,n,r=eI(i);if(t){var o=eI(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(e=n)&&("object"==(e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)||"function"==typeof e)?e:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this)});function i(){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return n=[{key:"init",value:function(){var e=this;return eL(function(){var t;return eD(this,function(n){switch(n.label){case 0:return document.$emitter.subscribe(z,e._handleInit.bind(e)),[4,e._handleInit()];case 1:return n.sent(),(t=document.getElementById(e.options.productWidgetId))&&(e.$emitter.subscribe(eF,e.createProductDetailWidget.bind(e,t)),e.createProductDetailWidget(t)),[2]}})})()}},{key:"refreshToken",value:function(){this.api.refreshToken()}},{key:"logout",value:function(){this.api.destroyAll()}},{key:"initApi",value:function(){var e=this;return eL(function(){return eD(this,function(t){return e.api=new eP(eL(function(){return eD(this,function(e){switch(e.label){case 0:return[4,fetch(window.router["frontend.tecsafe.ofcp.token"])];case 1:return[4,e.sent().json()];case 2:return[2,e.sent().token]}})}),{appUrl:e.options.appUrl,widgetBaseURL:e.options.appUrl,allowedOrigins:e.options.allowedOrigins,iframeTransition:"none",styles:""}),[2]})})()}},{key:"_handleInit",value:function(){var e=this;return eL(function(){return eD(this,function(t){switch(t.label){case 0:if(console.debug(e),!d.getItem(e.options.cookieName))return[3,2];return[4,e.initApi()];case 1:return t.sent(),e.$emitter.publish(eF),[2,e.api.getToken()];case 2:return[2]}})})()}},{key:"createProductDetailWidget",value:function(e){return this.api?this.api.createProductDetailWidget(e):this.createProductDetailWidgetPlaceholder(e)}},{key:"createProductDetailWidgetPlaceholder",value:function(e){return e.innerHTML=document.getElementById("product-widget-placeholder").innerHTML,e.querySelector("a").addEventListener("click",function(e){e.preventDefault();var t=eU.getPluginInstances("CookieConfiguration");if(t.length>0){var n,r=t[0];(null!=(n=Object)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](r):r instanceof n)&&"function"==typeof r.openOffCanvas&&r.openOffCanvas()}}),e}}],eR(i.prototype,n),r&&eR(i,r),i}(ex(V));(function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})(eq,"options",{cookieName:"tecsafe-foam-configurator-enabled",urlAttribute:"data-url",appUrl:"",productWidgetId:"tecsafe-product-widget-container",allowedOrigins:[]}),window.PluginManager.register("Tecsafe",eq,"[data-tecsafe-init]")})()})();